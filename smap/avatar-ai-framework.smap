{"sandbox_archive_version":61,"resources":[{"default":[]},{"autogenerated":[]},{"terrainImport":[]}],"resourceCart":[{"guid":[1101897418,2507817835,3094537286,1546502699],"name":"Local","parentGuid":[0,0,0,0],"type":"kGeneric","preload":false,"meta":"{\"sandbox_archive_version\":51}"},{"guid":[20081327,3811722658,2346874489,3237291753],"name":"Global","parentGuid":[0,0,0,0],"type":"kGeneric","preload":false,"meta":"{\"sandbox_archive_version\":51}"}],"mapdata":[{"ObjectsLinker":[{"class":"cWorkspace","name":"Archetypes","guid":[2301495294,1274365006,3003438828,1864040556],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cPlayerInstance","name":"Player","guid":[821939657,2231651804,3205518288,3133023722],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cPlayerAvatarInstance","name":"Avatar","guid":[2086577372,1035157785,2412732698,2224839101],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_Head","guid":[1952377286,2257011431,2235437585,1990350708],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_R_Hand","guid":[1365265308,2584495651,3179854900,2314059387],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_L_Hand","guid":[1001141281,105596195,2413995681,1572381856],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_Pelvis","guid":[3930266631,3765193548,2657671196,2444667291],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_R_Foot","guid":[1011560467,1551582414,3132691223,44035332],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBoneAnchor","name":"Bone_L_Foot","guid":[3538847244,808075570,2480843790,1198870357],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cUiSurfaceUiObject","name":"NameGUI","guid":[1405111285,2384023431,3182972373,2500518680],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cUiTextObject","name":"NameBar","guid":[2026945124,2380024573,3064606367,171005546],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cUiSurfaceUiObject","name":"HealthGUI","guid":[1362459126,1156792341,2681269783,824873225],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cUiImageObject","name":"Background","guid":[2692120497,1768836605,2660612515,4269796384],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cUiImageObject","name":"HealthBar","guid":[3177680961,308758981,2341371969,3691269346],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cScriptObject","name":"PlayerControlScript","guid":[1560065165,549536527,2196214773,3289613067],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cScriptObject","name":"PlayerGUIScript","guid":[4094515156,1401045121,2425964011,2999181753],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cBlackholeFolderObject","name":"Local","guid":[417325223,2932100337,2430726746,1418825083],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cUiScreenUiObject","name":"ControlGUI","guid":[2288685280,129189584,3004433564,697975946],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cUiFigureObject","name":"TouchFigure","guid":[2197565629,1415203114,2823922405,1734351976],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cUiButtonObject","name":"JumpButton","guid":[102160580,854410432,2549292484,1202403965],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cUiJoystickObject","name":"Joystick","guid":[214363713,4292497295,3028021729,2005335375],"spaceId":"kArchetypeSpace","objectType":-842150451},{"class":"cIndependentObject","name":"Independent","guid":[2453424774,3327281782,3111155612,3452615377],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cCamera","name":"GameCamera","guid":[759347957,2245412439,2215380327,3955432270],"spaceId":"kArchetypeSpace","objectType":0},{"class":"cIndependentObject","name":"Independent","guid":[2035801620,2134724308,2629534182,769215545],"spaceId":"kArchetypeSpace","objectType":0}],"ObjectsData":[{"class":"cWorkspace","name":"Archetypes","guid":[2301495294,1274365006,3003438828,1864040556],"parentGuid":[0,0,0,0],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Archetypes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sWorkspaceComponent","data":{}},{"id":11,"class":"sConfigPhysicsComponent","data":{"m_collisionGroupMaskFlags":[0,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}]},{"class":"cPlayerInstance","name":"Player","guid":[821939657,2231651804,3205518288,3133023722],"parentGuid":[2301495294,1274365006,3003438828,1864040556],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Player"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sRigidBodyComponent","data":{"m_isStatic":false,"m_density":1000.0,"m_frictionRate":0.0,"m_rough":0.0,"m_restitution":0.0,"m_freezeRotation":true,"m_gravityScale":2.0,"m_statusFlag":10}},{"id":20,"class":"sCharacterControllerComponent","data":{"m_characterWidth":0.5,"m_jumpUpVelocity":8.0}},{"id":40,"class":"sCharacterStateComponent","data":{"m_respawnTime":3.0,"m_avatar":[2086577372,1035157785,2412732698,2224839101],"m_displayName":true}},{"id":50,"class":"sRenderComponent","data":{}},{"id":60,"class":"sNetworkComponent","data":{}},{"id":666,"class":"sStateSyncComponent","data":{"m_syncRotation":[0.0,0.0,0.0,1.0],"m_distrSimVersion":0}}]},{"class":"cPlayerAvatarInstance","name":"Avatar","guid":[2086577372,1035157785,2412732698,2224839101],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Avatar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sPlayerModelInstanceComponent","data":{"m_head":{"attriValue":"DefaultMale","valueList":["DefaultMale","Male_Head2","Male_Head3"]},"m_clothes":{"attriValue":"DefaultMale","valueList":["DefaultMale","Male_Chest_Naked_01","Male_Chest_TshirtShort_A001","Male_Chest_TshirtShort_A002","Male_Chest_TshirtShort_A003","Male_Chest_TshirtShort_A004","Male_Chest_TshirtShort_A005","Male_Chest_TshirtShort_A006","Male_Chest_TshirtShort_A007","Male_Chest_TshirtShort_A008","Male_Chest_TshirtShort_A009","Male_Chest_TshirtShort_A010","Male_Chest_TshirtShort_B001","Male_Chest_TshirtShort_B002","Male_Chest_TshirtShort_B003","Male_Chest_TshirtShort_B004","Male_Chest_TshirtShort_B005","Male_Chest_TshirtShort_B02001","Male_Chest_TshirtShort_B02002","Male_Chest_TshirtShort_B02003","Male_Chest_TshirtShort_B02004","Male_Chest_TshirtShort_B03001","Male_Chest_TshirtShort_B03002","Male_Chest_TshirtShort_03001","Male_Chest_TshirtShort_03002","Male_Chest_TshirtShort_03003","Male_Chest_TshirtShort_03004","Male_Chest_TshirtShort_03005","Male_Chest_SweaterLong_A001","Male_Chest_SweaterLong_A002","Male_Chest_SweaterLong_A003","Male_Chest_SweaterLong_A004","Male_Chest_SweaterLong_A005","Male_Chest_SweaterLong_A006","Male_Chest_SweaterLong_A007","Male_Chest_SweaterLong_A008","Male_Chest_SweaterLong_A009","Male_Chest_SweaterLong_A010","Male_Chest_SweaterLong_A011","Male_Chest_SweaterLong_A012","Male_Chest_SweaterLong_A013","Male_Chest_SweaterLong_A014","Male_Chest_SweaterLong_A015","Male_Chest_SweaterLong_A016","Male_Chest_SweaterLong_A017","Male_Chest_Jacket_Baseball_A001","Male_Chest_Jacket_Baseball_A002","Male_Chest_Jacket_Baseball_A003","Male_Chest_Jacket_Baseball_A004","Male_Chest_Jacket_Baseball_A005","Male_001Jacket","Male_Jacket_Leis01","RedJacket","Male_Jacket_Leis02","Male_Jacket_Leis03","Male_006Jacket","Male_007Jacket","Male_008Tshirt","Male_009Jacket","Male_010Tshirt","Male_011Tshirt","Male_012Jacket","Male_Chest_Robe_India_001","Male_Chest_JacketIndiaSilk_001","Male_AviatorJacket","Male_MexicJacket","Male_SpaceJacket","Male_BaseballJacket","Male_BaseballJacket_02","Male_UniverJacket","Male_UniverJacket_01","Male_OwlJacket","Male_OwlJacket_02","Male_Chest_ArmorGriffin_001","Male_Chest_ArmorGriffin_002","Unisex_Chest_ArmorIron_001","Unisex_Chest_ArmorIron_002","Male_WendigoJacket","Male_WendigoJacket_02","Male_NutJacket","Male_Chest_UniformPolice_001","Male_Chest_TshitSki_001","Male_Chest_JacketRobtDog_001","Male_Chest_MuscleSuitShark_001","Male_Chest_MuscleSuitShark_002","Male_Chest_TshirtWaste_001","Male_Chest_TshirtWaste_00","Male_Chest_JacketBiker_001","Male_Chest_JacketMotor_001","Male_Chest_TshirtSteam_001","Male_Chest_JacketRobtEva_001","Male_Chest_JacketRobtEva_002","Male_Chest_JacketRobtEva_003","Male_Chest_JacketRobtEva_004","Male_Chest_JacketAI_001","Male_Chest_JacketAI_002","Male_Chest_MadMaxVest_001","Male_Chest_MadMaxVest_002","Male_Chest_MadMaxVest_003","Male_Chest_TshirtCowboy_001","Male_Zombies01Tshirt","Male_Zombies03Jacket","Male_Zombies04Tshirt","Male_Zombies06Jacket","Male_Chest_JacketElf_001","Male_Chest_JacketCasual_001","Male_Chest_TshirtSArmy_001","Male_Chest_UniformSoccer_001","Male_Chest_JacketFire_001","Male_Chest_TshirtSStreetball_01_001","Male_Chest_TshirtSStreetball_02_002","Male_Chest_JacketEnergy_01_001","Male_Chest_SuitSuit_02_001","Male_Chest_SuitSuit_TV_001","Male_Chest_JacketLeisure_001","Male_Chest_ShirtLeisure_001","Male_Chest_TshirtSkater_001","Male_Chest_JacketWaste_002","Male_Chest_JacketWaste_02_002","Male_Chest_SweaterUnicorn_001","Male_Chest_JacketGreenBerets_001","Male_Chest_JacketSnow_01_001","Male_Chest_JacketSnow_01_002"]},"m_trousers":{"attriValue":"DefaultMale","valueList":["DefaultMale","Male_Jeans01Trousers","Male_Leis01Trousers","Male_003Trousers","Male_Leis01Pants","Male_Leis03Trousers","Male_006Trousers","Male_007Trousers","Male_008Trousers","Male_009Trousers","Male_010Trousers","Male_011Trousers","Male_012Pants","Male_Leg_Pants_India_001","Male_Leg_TrousersIndiaSilk_001","Male_AviatorTrousers","Male_AviatorTrousers_02","Male_MexicTrousers","Male_SpaceTrousers","Male_BaseballTrousers","Male_BaseballTrousers_02","Male_UniverTrousers","Male_UniverTrousers_01","Male_OwlTrousers","Male_OwlTrousers_02","Male_Leg_ArmorGriffin_001","Male_Leg_ArmorGriffin_002","Male_Leg_ArmorIron_001","Male_Leg_ArmorIron_002","Male_WendigoTrousers","Male_WendigoTrousers_02","Male_NutTrousers","Male_Leg_PantsLPolice_001","Male_Leg_PantsLPolice_002","Male_Leg_PantsLSki_001","Male_Leg_PantsLRobtDog_001","Male_Leg_TrousersWaste_001","Male_Leg_TrousersWaste_00","Male_Leg_TrousersBiker_001","Male_Leg_TrousersLMotor_001","Male_Leg_TrousersSteam_001","Male_Leg_PantsLRobtEva_001","Male_Leg_PantsLRobtEva_002","Male_Leg_PantsLAI_001","Male_Leg_TrousersMadMax_001","Male_Leg_TrousersMadMax_002","Male_Leg_TrousersCowboy_001","Male_Zombies01Pants","Male_Zombies03Trousers","Male_Zombies04Trousers","Male_Zombies06Trousers","Male_Leg_TrousersElf_001","Male_Leg_TrousersCasual_001","Male_Leg_PantsLArmy_001","Male_Leg_PantsSoccer_001","Male_Leg_FireTrousers","Male_Leg_Streetball_01PantsS","Male_Leg_Energy_01_MPantsS","Male_Leg_BeachShorts_A001","Male_Leg_BeachShorts_A002","Male_Leg_BeachShorts_A003","Male_Leg_BeachShorts_A004","Male_Leg_BeachShorts_A005","Male_Leg_BeachShorts_A006","Male_Leg_BeachShorts_A007","Male_Leg_BeachShorts_A008","Male_Leg_PantsShark_001","Male_Leg_PantsShark_002","Male_Leg_Suit_02_MTrousers","Male_Leg_Suit_TV_MTrousers","Male_Leg_PantsLLeisure_001","Male_Leg_PantsSkater_001","Male_Leg_PantsSWaste_002","Male_Leg_PantsLUnicorn_001","Male_Leg_TrousersGreenBerets_001","Male_Leg_PantsLSnow_01_001","Male_Leg_PantsLSnow_01_002"]},"m_hair":{"attriValue":"DefaultMale","valueList":["DefaultMale","Hair_Brown01M","Hair_Blonde01M","Hair_Blonde02M","Hair_Orange01M","Hair_White01M","Hair_Green01M","Male_Head_Hair_010","Male_Head_Hair_014","Male_Head_Hair_015","Male_Head_Hair_018","Male_Head_Hair_019","Male_Head_Hair_020","Male_Head_Hair_023","Male_Head_Hair_024","Male_Head_Hair_028","Male_Head_Hair_030","Male_Head_Hair_033","Hair_Zombies06_M"]},"m_hairColor":{"attriValue":"","valueList":["DefaultMale","Hair_Male_02","Hair_Male_03","Hair_Male_04","Hair_Male_05","Hair_Male_06","Hair_Male_07","Hair_Male_08","Hair_Male_09","Hair_Male_10","Hair_Male_11","Hair_Male_12","Hair_Male_13","Hair_Male_14","Hair_Male_15","Hair_Male_16","Hair_Male_17","Hair_Male_18","Hair_Male_19","Hair_Male_20","Hair_Male_21","Hair_Male_22","Hair_Male_23","Hair_Male_24"]},"m_hands":{"attriValue":"DefaultMale","valueList":["DefaultMale","Default_Hands","Male_GLeather01","Male_AviatorGloves","Male_SpaceGloves","Male_BaseballGloves","Male_UniverGloves","Male_UniverGloves_01","Male_OwlGloves","Unisex_Hand_GlovesGriffin_001","Unisex_Hand_GlovesIron_001","Male_WendigoGloves","Male_WendigoGloves_02","Unisex_Hand_GlovesSki_001","Unisex_Hand_GlovesRobtDog_001","Male_Hand_GlovesBiker_001","Unisex_Hand_GlovesRobtEva_001","Unisex_Hand_GlovesRobtEva_002","Unisex_Hand_GlovesAI_001","Male_Hand_GlovesSteam_001","Male_Hand_GlovesElf_001","Male_Hand_GlovesFire_001","Male_Hand_GlovesStreetball_001"]},"m_shoes":{"attriValue":"DefaultMale","valueList":["DefaultMale","Male_Feet_Naked_01","LeatherShoe","Male_Leis01Shoes","Unisex_Feet_CanvasShoes_A001","Unisex_Feet_CanvasShoes_A002","Unisex_Feet_CanvasShoes_A003","Unisex_Feet_CanvasShoes_A004","Unisex_Feet_CanvasShoes_A005","Unisex_Feet_CanvasShoes_A006","Unisex_Feet_CanvasShoes_A007","Unisex_Feet_CanvasShoes_A008","Unisex_Feet_CanvasShoes_A009","Unisex_Feet_CanvasShoes_A010","Unisex_Feet_Sneakers_01001","Unisex_Feet_Sneakers_01002","Unisex_Feet_Sneakers_01003","Unisex_Feet_Sneakers_01004","Unisex_Feet_Sneakers_01005","Unisex_Feet_Sneakers_01006","Unisex_Feet_Sneakers_01007","Unisex_Feet_Sneakers_01008","Unisex_Feet_Sneakers_01009","Unisex_Feet_Sneakers_01010","Unisex_Feet_Sneakers_01011","Unisex_Feet_Sneakers_01012","Unisex_Feet_Sneakers_01013","Unisex_Feet_Sneakers_01014","Unisex_Feet_Sneakers_01015","Unisex_Feet_Sneakers_01016","Male_003Shoes","Male_BLeather01","Male_Leis03Shoes","Male_006Shoes","Male_007Shoes","Male_008Shoes","Male_009Shoes","Unisex_Feet_BasketballShoes_003","Male_010Shoes","Male_011Boots","Male_012Boots","Male_Feet_Shoes_India_001","Male_Feet_ShoesIndiaSilk_001","Male_AviatorShoes","Male_MexicBoots","Male_SpaceBoots","Male_BaseballShoes","Male_UniverShoes","Male_UniverShoes_01","Male_OwlBoots","Unisex_Feet_ShoesGriffin_001","Unisex_Feet_ShoesIron_001","Male_WendigoShoes","Male_WendigoShoes_02","Male_NutBoots","Unisex_Feet_ShoesPolice_001","Unisex_Feet_BootsSki_001","Unisex_Feet_ShoesSki_001","Male_Feet_ShoesRobtDog_001","Unisex_Feet_SlippersShark_001","Male_Feet_BootsWaste_001","Male_Feet_BootsBiker_001","Male_Feet_BootsMotor_001","Male_Feet_BootsSteam_001","Unisex_Feet_ShoesRobtEva_001","Unisex_Feet_ShoesRobtEva_002","Unisex_Feet_ShoesAI_001","Male_Feet_BootsMadMax_001","Male_Feet_BootsCowboy_001","Male_Zombies01Shoes","Male_Zombies03Boots","Male_Zombies04Boots","Male_Zombies06Shoes","Male_Feet_BootsElf_001","Male_Feet_ShoesCasual_001","Unisex_Feet_ShoesDiving_001","Unisex_Feet_FinsDiving_001","Unisex_Feet_FinsDiving_002","Unisex_Feet_FinsDiving_003","Unisex_Feet_FinsDiving_004","Unisex_Feet_FinsDiving_005","Unisex_Feet_FinsDiving_006","Unisex_Feet_FinsDiving_007","Unisex_Feet_BootArmy_001","Male_Soccer_001_Shoes","Unisex_Feet_ShoesFire_001","Male_Streetball_01_Shoes","Male_Feet_BootsEnergy_01_M_001","Male_Feet_BootsSuit_02_M_001","Male_Feet_BootsSuit_TV_M_001","Female_Soccer_001_Shoes","Female_waste_04_Shoes","Female_Feet_ShoesLeisure_001","Male_Feet_ShoesLeisure_001","Male_Feet_ShoesSkater_001","Female_Feet_BootsWaste_002","Male_Feet_BootsUnicorn_001","Male_Feet_BootsGreenBerets_001","Male_Feet_BootsSnow_01_001"]},"m_skinColor":{"attriValue":"DefaultMale","valueList":["DefaultMale","Color2","Color3","Color4","Color5","Color6","Color7","Color8","Color9","Color10","Color11","Color12","Color13"]},"m_headAccessory":{"attriValue":"Empty_Head","valueList":["Empty_Head","Male_ComHat_001","Male_ComHat003","Male_ComHat004","Male_ComHat005","Male_ComHat006","Male_ComHat007","Male_ComHat00702","Male_ComHat00703","Unisex_Head_Hat_016","Male_008Hat","Male_010Hat","Male_011Hat","Male_012Hat","Male_Head_Hat_Leisure_001","Male_Head_Hat_Skater_001","Male_Head_ComHelmet_002","Male_ComHelmet003","Male_ComHelmet004","Male_ComHelmet005","Male_013Hat","Female_013Hat","Male_Head_HatCowboy_001","Male_Head_HatCasual_001","Male_AviatorHat","Male_MexicHat","Male_SpaceHelmet","Male_Baseball01Hat","Male_Baseball02Hat","Male_Baseball03Hat","Male_Baseball04Hat","Male_UniverHelmet","Male_UniverHelmet_01","Male_Owl_Helmet","Male_Head_HelmetGriffin_001","Unisex_Head_HelmetIron_001","Male_Wendigo_Helmet","Male_Wendigo_Helmet_02","Male_Nut_Helmet","Male_Head_Hat_Unicorn","Unisex_Head_MaskPolice_001","Unisex_Head_CapPolice_001","Unisex_Head_CapSki_001","Male_Head_HelmetRobtDog_001","Male_Head_HelmetShark_001","Male_Head_HelmetBiker_001","Female_Head_HelmetBiker_001","Female_Head_HelmetMotor_001","Male_Head_HelmetMotor_001","Male_Head_HatSteam_001","Unisex_Head_HelmetRobtEva_001","Unisex_Head_HelmetRobtEva_002","Unisex_Head_HelmetAI_001","Male_Head_HelmetSuit_TV_001","Female_Head_HelmetSuit_TV_001","Male_Head_Hat_India_001","Male_Head_HelmetIndiaSilk_001","Male_Head_HelmetIndiaSilk_002","Unisex_Head_HelmetArmy_001","Unisex_Head_HelmetFire_001","Male_Zombies01Hat","Male_Zombies03_Helmet","Male_Zombies04_Helmet","Male_Zombies06_Hat","Male_Head_HatElf_001","Unisex_Head_HelmetDiving_001","Unisex_Head_HelmetMadMax","Unisex_Head_HelmetGreenBerets","Unisex_Head_HelmetSnow_01_001","Unisex_Head_HatSnow_01_001","Unisex_Head_Headset_001","Unisex_Head_Headset_002","Unisex_Head_Headset_003","Unisex_Head_Headset_004","Unisex_Head_Headset_005","Unisex_Head_Hat_012","Unisex_Head_Hat_013","Unisex_Head_Hat_01401","Unisex_Head_Hat_01402","Unisex_Head_Hat_015"]},"m_faceAccessory":{"attriValue":"Empty_Face","valueList":["Empty_Face","Glasses","Unisex_Head_GlassLeisure_001","Unisex_Head_GlassSkater_001","Unisex_Head_GlassEnergy_001","Female_MadMax_Glasses","Unisex_Head_Glass_00101","Unisex_Head_Glass_00102","Unisex_Head_Glass_00201","Unisex_Head_Glass_00202","Unisex_Head_Glass_00203","Unisex_Head_Glass_003","Unisex_Head_Glass_004","Unisex_Head_Glass_005","Unisex_Head_Glass_006","Unisex_Head_Glass_007","Unisex_Head_Glass_008","Unisex_Head_Glass_010","Unisex_Head_Glass_011","Unisex_Head_Glass_012","Unisex_Head_Glass_013","Unisex_Head_Goggle_001","Unisex_Head_Goggle_002","Unisex_Head_Goggle_003","Unisex_Head_Goggle_004","Unisex_Head_Goggle_005","Unisex_Head_Goggle_006","Unisex_Head_Goggle_007","Unisex_Head_Decoration_00501","Unisex_Head_Decoration_00601","HeadSet","Unisex_Head_MaskMadMax","Unisex_Head_MaskFire_001","Unisex_Head_Mask_001","Unisex_Head_Mask_002","Unisex_Head_Mask_003","Unisex_Head_Mask_004","Unisex_Head_Mask_005","Unisex_Head_Mask_00701","Unisex_Head_Mask_00702","Unisex_Head_Mask_00703","Unisex_Head_Mask_008","Unisex_Head_Mask_00901","Unisex_Head_Mask_00902","Unisex_Head_MaskGreenBerets_001","Unisex_Head_Decoration_00101","Unisex_Head_Decoration_002","Unisex_Head_Decoration_003","Unisex_Head_Decoration_004","Unisex_Head_Earpods_Leisure_001"]},"m_bodyAccessory":{"attriValue":"Empty_Body","valueList":["Empty_Body","Male_AviatorScarf","Male_AviatorScarf_02","Male_AviatorScarf_03","Male_Zombies06_ChestSup","Unisex_Chest_LifeVest_01","Male_009Bag","Male_012Bag","Female_Chest_Hobo_002","Unisex_Body_BagLeisure_001","Male_AviatorBag","Male_MexicUkulele","Male_SpaceBag","Male_BaseballBag","Male_UniverBag","Male_WendigoBag","Unisex_Back_BackpackPolice_001","Unisex_Back_BackpackSki_001","Female_Back_BackpackSteam_001","Unisex_Chest_BackpackEnergy_001","Male_Zombies04Bag","Female_Zombies05Bag","Male_Zombies06Bag","Unisex_Chest_Backpack_00801","Unisex_Chest_Backpack_00901","Unisex_Chest_Backpack_01001","Unisex_Chest_Backpack_01101","Unisex_Chest_Backpack_01201","Unisex_Chest_ShoulderBag_00201","Unisex_Chest_ShoulderBag_00301","Unisex_Chest_ShoulderBag_00401","Unisex_Chest_ShoulderBag_00601","Male_Back_WingsElf_001","Male_Back_WingsUnicorn_001","Unisex_Back_BackpackCasual_001","Unisex_Chest_BagFire_001","Unisex_Chest_BackpackDiving_001","Female_Chest_OxygenDiving_001","Female_Chest_OxygenDiving_002","Male_BchestSup","Male_ComChestSup001","Male_ComChestSup002","Male_ComChestSup003","Unisex_Chest_FlakVestArmy_001","Unisex_Chest_FlakVest_ColaVending","Unisex_Chest_FlakVest_Chalkboard","Unisex_Chest_FlakVest_Light_00101","Unisex_Chest_FlakVest_Light_00102","Unisex_Chest_FlakVest_Pizzabox","Unisex_Chest_FlakVest_Recorder","Unisex_Chest_FlakVestStreetball_001","Unisex_Chest_FlakVestMadMax_001","Unisex_Chest_FlakVestMotor_001","Unisex_Chest_FlakVestGreenBerets_001","Unisex_Chest_FlakVestGreenBerets_002","Unisex_Chest_FlakVestSnow_01_001","LifeBuoy","Unisex_Pelvis_Lifebuoy_Duck_01","Unisex_Pelvis_Lifebuoy_Donut_01","Unisex_Pelvis_Lifebuoy_Donut_02","Unisex_Pelvis_Lifebuoy_Watermelon","Unisex_Pelvis_Lifebuoy_Tire","NutSabre","Male_Pelvis_Cowboy_GunBag","Unisex_BagWaste_002","Watch","Female_CasualWatch","Unisex_Hand_WatchDiving_001","Male_010Wrist","Female_CasualWrist","Male_IndiaSilkWrist","Male_SteamWrist","Male_011Wrist","Unisex_Arm_WristWaste_002","Unisex_Hand_WatchLeisure_01","Unisex_Hand_WatchSkater_01","Unisex_Hand_WristbandSkater_01","Unisex_Hand_WristbandSkater_002","Unisex_Hand_WristbandMadMax_01","Unisex_Hand_WristbandStreetball_01"]},"m_eyes":{"attriValue":"Default_Eyes_M","valueList":["Default_Eyes_M","Idle02_Eyes_M","Idle03_Eyes_M","Idle04_Eyes_M","Idle05_Eyes_M","Idle06_Eyes_M","Idle07_Eyes_M","Idle08_Eyes_M","Idle09_Eyes_M","Idle10_Eyes_M","Idle11_Eyes_M","Idle12_Eyes_M"]},"m_eyesColor":{"attriValue":"","valueList":["DefaultMale","Eyes_C_02","Eyes_C_03","Eyes_C_04","Eyes_C_05","Eyes_C_06","Eyes_C_07","Eyes_C_08","Eyes_C_09"]},"m_brows":{"attriValue":"Default_Eyebrow_M","valueList":["Default_Eyebrow_M","Idle02_Eyebrow_M","Idle03_Eyebrow_M","Idle04_Eyebrow_M","Idle05_Eyebrow_M","Idle06_Eyebrow_M","Idle07_Eyebrow_M","Idle08_Eyebrow_M","Idle09_Eyebrow_M","Idle10_Eyebrow_M","Idle11_Eyebrow_M","Idle12_Eyebrow_M"]},"m_nose":{"attriValue":"Default_Nose_M","valueList":["Default_Nose_M"]},"m_mouth":{"attriValue":"Default_Mouth_M","valueList":["Default_Mouth_M","Idle02_Mouth_M","Idle03_Mouth_M","Idle04_Mouth_M","Idle05_Mouth_M","Idle06_Mouth_M","Idle07_Mouth_M","Idle08_Mouth_M","Idle09_Mouth_M","Idle10_Mouth_M","Idle11_Mouth_M","Idle12_Mouth_M"]},"m_beard":{"attriValue":"Default_Beard_M","valueList":["Default_Beard_M","Beard_01_M","Beard_02_M"]},"m_faceDecoration":{"attriValue":"Default_FaceDecorate_M","valueList":["Default_FaceDecorate_M","Decoration_01_M","Decoration_02_M","Decoration_03_M","Decoration_04_M"]}}},{"id":20,"class":"sAnimationComponent","data":{}},{"id":25,"class":"sPlayerExpressionComponent","data":{}},{"id":45,"class":"sAnimationIKFullBodyComponent","data":{}},{"id":40,"class":"sPlayerModelInstanceRenderComponent","data":{}}]},{"class":"cBoneAnchor","name":"Bone_Head","guid":[1952377286,2257011431,2235437585,1990350708],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-0.0,1.3431,-0.0498],"m_localRotation":[0.5163,-0.4831,-0.5163,0.4831]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_Head"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_Head"}}]},{"class":"cBoneAnchor","name":"Bone_R_Hand","guid":[1365265308,2584495651,3179854900,2314059387],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.42,0.817,-0.0306],"m_localRotation":[-0.141,0.02,0.8559,0.497]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_R_Hand"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_R_Hand"}}]},{"class":"cBoneAnchor","name":"Bone_L_Hand","guid":[1001141281,105596195,2413995681,1572381856],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-0.42,0.817,-0.0306],"m_localRotation":[0.8559,0.497,-0.141,0.02]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_L_Hand"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_L_Hand"}}]},{"class":"cBoneAnchor","name":"Bone_Pelvis","guid":[3930266631,3765193548,2657671196,2444667291],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-0.0,0.786,-0.0675],"m_localRotation":[0.5,-0.5,-0.4999,0.4999]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_Pelvis"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_Pelvis"}}]},{"class":"cBoneAnchor","name":"Bone_R_Foot","guid":[1011560467,1551582414,3132691223,44035332],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.1584,0.1195,-0.1073],"m_localRotation":[0.5487,0.5487,0.4459,0.4459]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_R_Foot"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_R_Foot"}}]},{"class":"cBoneAnchor","name":"Bone_L_Foot","guid":[3538847244,808075570,2480843790,1198870357],"parentGuid":[2086577372,1035157785,2412732698,2224839101],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-0.1584,0.1195,-0.1073],"m_localRotation":[0.4459,0.4459,0.5487,0.5487]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Bone_L_Foot"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBoneAnchorComponent","data":{"m_boneName":"Bone_L_Foot"}}]},{"class":"cUiSurfaceUiObject","name":"NameGUI","guid":[1405111285,2384023431,3182972373,2500518680],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,2.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NameGUI","m_active":false}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUISurfaceRenderComponent","data":{}},{"id":26,"class":"sUiSurfaceUiComponent","data":{"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,0.0],"m_anchorsY":[0.0,0.0],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0],"m_billboard":true,"m_size":[300.0,80.0],"m_disappearDistance":15,"m_originSize":[300.0,80.0]}}]},{"class":"cUiTextObject","name":"NameBar","guid":[2026945124,2380024573,3064606367,171005546],"parentGuid":[1405111285,2384023431,3182972373,2500518680],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NameBar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":23,"class":"sUiTextComponent","data":{"m_addedSize":[300.0,80.0],"m_widgetSize":[300.0,80.0],"m_order":1,"m_anchor":"kAlignBottomLeft","m_finalSize":[300.0,80.0],"m_text":"","m_textColor":[1.0,1.0,1.0,1.0],"m_fontSize":32,"m_wrap":true}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiSurfaceUiObject","name":"HealthGUI","guid":[1362459126,1156792341,2681269783,824873225],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,2.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"HealthGUI","m_active":false}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUISurfaceRenderComponent","data":{}},{"id":26,"class":"sUiSurfaceUiComponent","data":{"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,0.0],"m_anchorsY":[0.0,0.0],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0],"m_billboard":true,"m_size":[160.0,80.0],"m_disappearDistance":15,"m_originSize":[160.0,80.0]}}]},{"class":"cUiImageObject","name":"Background","guid":[2692120497,1768836605,2660612515,4269796384],"parentGuid":[1362459126,1156792341,2681269783,824873225],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Background"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":22,"class":"sUiImageComponent","data":{"m_addedSize":[160.0,31.0],"m_widgetSize":[160.0,31.0],"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,0.0],"m_anchorsY":[0.0,0.0],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0],"m_acceptRaycastWhenEdit":true,"m_prePivot":[0.0,0.0],"m_preAnchorsX":[0.0,0.0],"m_preAnchorsY":[0.0,0.0],"m_finalSize":[160.0,31.0],"m_imagePriSize":[136.0,28.0],"m_textureRef":{"m_guid":[2748549193,222842754,2941154731,726271496],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_imageType":"kSliced","m_fillAmount":0.0,"m_imageColor":[1.0,1.0,1.0,0.9555],"m_averageColor":[0.0,0.0,0.0,1.0],"m_averageColorReciprocal":[1.0,1.0,1.0,5.6666]}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiImageObject","name":"HealthBar","guid":[3177680961,308758981,2341371969,3691269346],"parentGuid":[2692120497,1768836605,2660612515,4269796384],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"HealthBar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":22,"class":"sUiImageComponent","data":{"m_widgetSize":[144.0,12.3999],"m_pivot":[0.0,0.0],"m_anchorsX":[0.05,0.9499],"m_anchorsY":[0.3,0.6999],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0],"m_acceptRaycastWhenEdit":true,"m_prePivot":[0.0,0.0],"m_preAnchorsX":[0.05,0.9499],"m_preAnchorsY":[0.3,0.6999],"m_finalSize":[144.0,12.3999],"m_imagePriSize":[124.0,16.0],"m_textureRef":{"m_guid":[364921788,1323712570,2497125887,1146669227],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_imageType":"kSliced","m_fillAmount":0.0,"m_imageColor":[4.5625,1.0,3.1612,1.0],"m_averageColor":[0.0,0.0,0.0,1.0],"m_averageColorReciprocal":[15.9374,1.0,8.2258,1.0]}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cScriptObject","name":"PlayerControlScript","guid":[1560065165,549536527,2196214773,3289613067],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerControlScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"-- 获取本地玩家\r\nlocal player = localPlayer\r\n\r\n--声明变量\r\nlocal isDead = false\r\nlocal forwardDir = Vector3.Forward\r\nlocal rightDir = Vector3.Right\r\nlocal finalDir = Vector3.Zero\r\nlocal horizontal = 0\r\nlocal vertical = 0\r\n\r\n-- 摄像机看向自己\r\nworld.CurrentCamera = player.Local.Independent.GameCamera\r\nlocal camera = world.CurrentCamera\r\nlocal mode = camera.CameraMode\r\ncamera.LookAt = player\r\n\r\n-- 手机端交互UI\r\nlocal gui = player.Local.ControlGUI\r\nlocal joystick = gui.Joystick\r\nlocal touchScreen = gui.TouchFigure\r\nlocal jumpButton = gui.JumpButton\r\n\r\n-- PC端交互按键\r\nlocal FORWARD_KEY = Enum.KeyCode.W\r\nlocal BACK_KEY = Enum.KeyCode.S\r\nlocal LEFT_KEY = Enum.KeyCode.A\r\nlocal RIGHT_KEY = Enum.KeyCode.D\r\nlocal JUMP_KEY = Enum.KeyCode.Space\r\n\r\n-- 键盘的输入值\r\nlocal moveForwardAxis = 0\r\nlocal moveBackAxis = 0\r\nlocal moveLeftAxis = 0\r\nlocal moveRightAxis = 0\r\n\r\n-- 移动方向是否遵循摄像机方向\r\nfunction IsFreeMode()\r\n\treturn (mode == Enum.CameraMode.Social and camera.Distance >= 0) or mode == Enum.CameraMode.Orbital \r\n\t\tor mode == Enum.CameraMode.Custom\r\nend\r\n\r\n--获取按键盘时的移动方向最终取值\r\nfunction GetKeyValue()\r\n\tmoveForwardAxis = Input.GetPressKeyData(FORWARD_KEY) > 0 and 1 or 0\r\n\tmoveBackAxis = Input.GetPressKeyData(BACK_KEY) > 0 and -1 or 0\r\n\tmoveLeftAxis = Input.GetPressKeyData(LEFT_KEY) > 0 and 1 or 0\r\n\tmoveRightAxis = Input.GetPressKeyData(RIGHT_KEY) > 0 and -1 or 0\r\n\tif player.State == Enum.CharacterState.Died then\r\n\t\tmoveForwardAxis, moveBackAxis, moveLeftAxis, moveRightAxis = 0, 0, 0, 0\r\n\tend\r\nend\r\n\r\n-- 获取移动方向\r\nfunction GetMoveDir()\r\n\tforwardDir = IsFreeMode() and camera.Forward or player.Forward \r\n\tforwardDir.y = 0\r\n\trightDir = Vector3(0, 1, 0):Cross(forwardDir)\r\n\thorizontal = joystick.Horizontal\r\n\tvertical = joystick.Vertical\r\n\tif horizontal ~= 0 or vertical ~= 0 then\r\n\t\tfinalDir = rightDir * horizontal + forwardDir * vertical\r\n\telse\r\n\t\tGetKeyValue()\r\n\t\tfinalDir = forwardDir * (moveForwardAxis + moveBackAxis) - rightDir * (moveLeftAxis + moveRightAxis)\r\n\tend\r\nend\r\n\r\n-- 移动逻辑\r\nfunction PlayerMove(dir)\r\n\tdir.y = 0\r\n\tif player.State == Enum.CharacterState.Died then\r\n\t\tdir = Vector3.Zero\r\n\tend\r\n\tif dir.Magnitude > 0 then\r\n\t\tif IsFreeMode() then\r\n\t\t\tplayer:FaceToDir(dir, 4 * math.pi)\r\n\t\tend\r\n\t\tplayer:MoveTowards(Vector2(dir.x, dir.z).Normalized)\r\n\telse\r\n\t\tplayer:MoveTowards(Vector2.Zero)\r\n\tend\r\nend\r\n\r\n-- 跳跃逻辑\r\nfunction PlayerJump()\r\n\tif (player.IsOnGround or player.State == Enum.CharacterState.Seated) and not isDead then\r\n\t\tplayer:Jump()\r\n\t\treturn\r\n\tend\t\r\nend\r\njumpButton.OnDown:Connect(PlayerJump)\r\nInput.OnKeyDown:Connect(function()\r\n\tif Input.GetPressKeyData(JUMP_KEY) == 1 then\r\n\t\tPlayerJump()\r\n\tend\r\nend)\r\n\r\n-- 死亡逻辑\r\nfunction PlayerDie()\r\n\tisDead = true\r\n\twait(player.RespawnTime)\r\n\tplayer:Reset()\r\n\tisDead = false\r\nend\r\nplayer.OnDead:Connect(PlayerDie)\r\n\r\n-- 生命值检测\r\nfunction HealthCheck(oldHealth, newHealth)\r\n\tif newHealth <= 0 then\r\n\t\tplayer:Die()\r\n\tend\r\nend\r\nplayer.OnHealthChange:Connect(HealthCheck)\r\n\r\n-- 每个渲染帧处理操控逻辑\r\nfunction MainControl()\r\n\tcamera = world.CurrentCamera\r\n\tmode = camera.CameraMode\r\n\tGetMoveDir()\r\n\tPlayerMove(finalDir)\r\nend\r\nworld.OnRenderStepped:Connect(MainControl)\r\n\r\n-- 滑屏转向\r\nfunction CameraMove(touchInfo)\r\n\tif #touchInfo == 1 then\r\n\t\tlocal deltapos = touchInfo[1].DeltaPosition\r\n\t\tif IsFreeMode() then\r\n\t\t\tcamera:CameraMove(mode == Enum.CameraMode.Orbital and Vector2(deltapos.x, 0) or deltapos)\r\n\t\telse \r\n\t\t\tworld.CurrentCamera.LookAt:Rotate(0, deltapos.x, 0) \r\n\t\t\tworld.CurrentCamera:CameraMove(Vector2(0, deltapos.y))\r\n\t\tend\r\n\tend\r\nend\r\ntouchScreen.OnTouched:Connect(CameraMove)\r\n\r\n-- 双指缩放摄像机距离\r\nfunction CameraZoom(pos1, pos2, dis, speed)\r\n\tif mode == Enum.CameraMode.Social then\r\n\t\tcamera.Distance = camera.Distance - dis / 50\r\n\tend\r\nend\r\ntouchScreen.OnPinchStay:Connect(CameraZoom)"}}]},{"class":"cScriptObject","name":"PlayerGUIScript","guid":[4094515156,1401045121,2425964011,2999181753],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerGUIScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"-- 获取本地玩家\r\nlocal player = localPlayer\r\n\r\n-- 姓名板\r\nlocal nameGUI = player.NameGUI\r\nnameGUI.NameBar.Text = player.Name\r\nnameGUI.LocalPosition = Vector3(0, player.Avatar.Height + 1.1, 0)\r\nlocal team = player:GetClosestTeam()\r\nif team and team.ClassName == 'Team' then\r\n\tnameGUI.NameBar.Color = team.TeamColor\r\nend\r\n\r\n-- 血条\r\nlocal healthGUI = player.HealthGUI\r\nlocal background = healthGUI.Background\r\nlocal healthBar = background.HealthBar\r\nlocal RED_BAR = ResourceManager.GetTexture(\"Internal/Blood_Red\")\r\nlocal GREEN_BAR = ResourceManager.GetTexture(\"Internal/Blood_Green\")\r\nlocal ORANGE_BAR = ResourceManager.GetTexture(\"Internal/Blood_Orange\")\r\n\r\n-- 姓名板的显示逻辑\r\nfunction NameBarLogic()\r\n\tnameGUI:SetActive(player.DisplayName)\r\nend\r\nplayer.OnDisplayNameChanged:Connect(NameBarLogic)\r\n\r\n-- 血条随生命值颜色改变而改变\r\nfunction healthChange(oldHealth, newHealth)\r\n\tlocal percent = player.Health / player.MaxHealth\r\n\tif player.HealthDisplayMode == Enum.HealthDisplayMode.OnHit then\r\n\t\thealthGUI:SetActive(percent < 1)\r\n\tend\r\n\tif percent >= 0.7 then\r\n\t\thealthBar.Texture = GREEN_BAR\r\n\telseif percent >= 0.3 then\r\n\t\thealthBar.Texture = ORANGE_BAR\r\n\telse\r\n\t\thealthBar.Texture = RED_BAR\r\n\tend\t\r\n\thealthBar.AnchorsX = Vector2(0.05, 0.9 * percent + 0.05)\r\nend\r\nplayer.OnHealthChange:Connect(healthChange)\r\nplayer.OnMaxHealthChanged:Connect(healthChange)\r\n\r\n-- 血条在各显示模式下的显示逻辑\r\nfunction HealthBarLogic()\r\n\tif player.HealthDisplayMode == Enum.HealthDisplayMode.Always then\r\n\t\thealthGUI:SetActive(true)\r\n\telseif player.HealthDisplayMode == Enum.HealthDisplayMode.Never then\r\n\t\thealthGUI:SetActive(false)\r\n\telseif player.HealthDisplayMode == Enum.HealthDisplayMode.OnHit then\r\n\t\thealthGUI:SetActive(player.Health ~= player.MaxHealth)\r\n\tend\r\nend\r\nplayer.OnHealthDisplayModeChanged:Connect(HealthBarLogic)\r\n\r\n--初始化姓名板和血条的显示\r\nNameBarLogic()\r\nHealthBarLogic()"}}]},{"class":"cBlackholeFolderObject","name":"Local","guid":[417325223,2932100337,2430726746,1418825083],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Local"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cUiScreenUiObject","name":"ControlGUI","guid":[2288685280,129189584,3004433564,697975946],"parentGuid":[417325223,2932100337,2430726746,1418825083],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"ControlGUI"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIScreenRenderComponent","data":{}},{"id":26,"class":"sUiScreenUiComponent","data":{"m_widgetSize":[1920.0,1080.0],"m_order":1,"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,0.0],"m_anchorsY":[0.0,0.0],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0]}}]},{"class":"cUiFigureObject","name":"TouchFigure","guid":[2197565629,1415203114,2823922405,1734351976],"parentGuid":[2288685280,129189584,3004433564,697975946],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"TouchFigure"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":24,"class":"sUiFigureComponent","data":{"m_widgetSize":[2022.8007,1140.0649],"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,1.0],"m_anchorsY":[0.0,1.0],"m_anchor":"kAlignBottomLeft","m_anchorPercent":[0.0,0.0],"m_alignment":"kAlignBottomLeft","m_alignmentPercent":[0.0,0.0],"m_prePivot":[0.0,0.0],"m_preAnchorsX":[0.0,1.0],"m_preAnchorsY":[0.0,1.0],"m_finalSize":[2000.0001,1551.923],"m_bgColor":[1.0,1.0,1.0,0.0],"m_borderColor":[0.0,0.0,0.0,0.0]}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiButtonObject","name":"JumpButton","guid":[102160580,854410432,2549292484,1202403965],"parentGuid":[2288685280,129189584,3004433564,697975946],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"JumpButton"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":26,"class":"sUiButtonComponent","data":{"m_addedSize":[200.0,200.0],"m_widgetSize":[205.7712,205.7712],"m_order":1,"m_anchorsX":[0.85,0.85],"m_anchorsY":[0.2,0.2],"m_anchor":"kAlignBottomLeft","m_alignment":"kAlignNone","m_alignmentPercent":[0.85,0.2],"m_acceptRaycastWhenEdit":true,"m_preAnchorsX":[0.85,0.85],"m_preAnchorsY":[0.2,0.2],"m_finalSize":[200.0,200.0],"m_image":{"m_guid":[1381378012,3623568531,2182762728,2959803675],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_fillAmount":0.0,"m_imageColor":[1.0196,1.0196,1.0196,1.0],"m_averageColor":[0.0,0.0,0.0,1.0],"m_averageColorReciprocal":[5.0,5.0,5.0,1.6776]}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiJoystickObject","name":"Joystick","guid":[214363713,4292497295,3028021729,2005335375],"parentGuid":[2288685280,129189584,3004433564,697975946],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Joystick"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":30,"class":"sUiJoystickComponent","data":{"m_widgetSize":[308.6568,308.6568],"m_order":2,"m_anchorsX":[0.2,0.2],"m_anchorsY":[0.2,0.2],"m_anchor":"kAlignTopLeft","m_alignment":"kAlignNone","m_alignmentPercent":[0.2,0.2],"m_preAnchorsX":[0.2,0.2],"m_preAnchorsY":[0.2,0.2],"m_finalSize":[300.0,300.0],"m_threshold":0.1,"m_workArea":[500.0,500.0],"m_backGround":{"m_guid":[1676341669,384255279,2994375601,539764901],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_handle":{"m_guid":[1309922238,2547074866,2257169120,2540834883],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_arrow":{"m_guid":[3072216954,3382394894,3198588415,2980353886],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false},"m_normalized":true}}]},{"class":"cIndependentObject","name":"Independent","guid":[2453424774,3327281782,3111155612,3452615377],"parentGuid":[417325223,2932100337,2430726746,1418825083],"components":[{"id":0,"class":"sIndependentTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Independent"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cCamera","name":"GameCamera","guid":[759347957,2245412439,2215380327,3955432270],"parentGuid":[2453424774,3327281782,3111155612,3452615377],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"GameCamera"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sCameraComponent","data":{"m_viewPortHeight":1,"m_viewPortWidth":1,"m_nearClip":0.0299}},{"id":11,"class":"sCameraRenderComponent","data":{}},{"id":20,"class":"sCameraBehaviorComponent","data":{"m_cameraMaxZoomDistance":50.0}},{"id":30,"class":"sAudioListenerComponent","data":{}}]},{"class":"cIndependentObject","name":"Independent","guid":[2035801620,2134724308,2629534182,769215545],"parentGuid":[821939657,2231651804,3205518288,3133023722],"components":[{"id":0,"class":"sIndependentTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Independent"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]}]},{"ObjectsLinker":[{"class":"cWorkspace","name":"World","guid":[1981988479,3555894,2597800867,69741929],"spaceId":"kDefaultSpace","objectType":0},{"class":"cWorkspace","name":"Global","guid":[344576033,1668630255,2683907297,2226597768],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"AutoAssignTeamScript","guid":[1988307774,2442019711,2592872571,1277204125],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"LuaFunctionScript","guid":[1414019724,4066527202,2188886684,1950800485],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"BTreeMainScript","guid":[2838117710,727861174,2541291470,2717323588],"spaceId":"kDefaultSpace","objectType":0},{"class":"cDataStoreObject","name":"DataStore","guid":[2838802579,436619052,2516973442,4240601818],"spaceId":"kDefaultSpace","objectType":0},{"class":"cFolderObject","name":"BTreePlugin","guid":[2876989748,2457488097,2382853771,4121614769],"spaceId":"kDefaultSpace","objectType":0},{"class":"cModuleScriptObject","name":"JsonModule","guid":[2281794680,2200063571,3179761180,2263430375],"spaceId":"kDefaultSpace","objectType":0},{"class":"cModuleScriptObject","name":"B3Module","guid":[2550788250,2045660374,2765953421,1021477390],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"ActionNodes","guid":[618467548,2152156948,2838888746,2796001249],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"CompositeNodes","guid":[4163892949,29640173,2790133346,2162277355],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"ConditionNodes","guid":[787510608,2188921297,2191343987,2592851435],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"DecoratorNodes","guid":[486026994,3836431686,2598097675,3960547084],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"CustomNodes","guid":[3506465198,892881498,2809204051,2983381729],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPrimitiveObject","name":"BaseFloor","guid":[4211227124,399589691,2212667733,3335218667],"spaceId":"kDefaultSpace","objectType":0},{"class":"cFolderObject","name":"SpawnLocations","guid":[1803916521,3674621259,2355104850,441818688],"spaceId":"kDefaultSpace","objectType":0},{"class":"cStartPortal","name":"StartPortal00","guid":[362184257,1300644271,2169624314,2670603163],"spaceId":"kDefaultSpace","objectType":0},{"class":"cStartPortal","name":"StartPortal01","guid":[651144420,800934336,3039799213,1377036607],"spaceId":"kDefaultSpace","objectType":0},{"class":"cStartPortal","name":"StartPortal02","guid":[4009425966,1206468687,2439525561,4287493119],"spaceId":"kDefaultSpace","objectType":0},{"class":"cStartPortal","name":"StartPortal03","guid":[3415283602,2930724749,3175953031,3420113780],"spaceId":"kDefaultSpace","objectType":0},{"class":"cAudioSource","name":"BGM","guid":[1596674502,2319271992,2900844459,2801180766],"spaceId":"kDefaultSpace","objectType":-842150451},{"class":"cSkydome","name":"Sky","guid":[3956874685,1991789763,3220541584,1456680764],"spaceId":"kDefaultSpace","objectType":-842150451},{"class":"cFolderObject","name":"Players","guid":[3397398191,850542637,3138524115,1333674022],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[718760084,1257915969,2962466066,2150526306],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[438081159,4019275113,2394302102,997050187],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[154289415,229392516,2254790969,287930189],"spaceId":"kDefaultSpace","objectType":0},{"class":"cTerrainObject","name":"Terrain","guid":[2381081137,2979483093,3156488065,1492146101],"spaceId":"kDefaultSpace","objectType":0},{"class":"cStaticSpaceFolderObject","name":"StaticSpace","guid":[1156127896,989415793,2817242198,3730054242],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPlayerInstance","name":"Npc","guid":[557654785,2380155339,3013303160,941967483],"spaceId":"kDefaultSpace","objectType":7143521},{"class":"cNpcAvatarInstance","name":"NpcAvatar","guid":[1231775529,3008252344,2697807223,2336561612],"spaceId":"kDefaultSpace","objectType":7143521},{"class":"cUiSurfaceUiObject","name":"NameGUI","guid":[1482332550,3394717746,2868581290,2295237364],"spaceId":"kDefaultSpace","objectType":7143521},{"class":"cUiTextObject","name":"NameBar","guid":[1764275455,3033613466,2672385125,3091238670],"spaceId":"kDefaultSpace","objectType":7143521},{"class":"cUiSurfaceUiObject","name":"HealthGUI","guid":[495557931,550323791,2284508679,1151179311],"spaceId":"kDefaultSpace","objectType":0},{"class":"cUiImageObject","name":"Background","guid":[1571337247,4276506147,2618749879,1933113932],"spaceId":"kDefaultSpace","objectType":7143521},{"class":"cUiImageObject","name":"HealthBar","guid":[2095581018,4193992826,3180616627,2874037211],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"PlayerGUIScript","guid":[1672903388,596460199,2820999280,642118727],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"AiFuncScript","guid":[1878721532,2979809209,2610914422,3804980083],"spaceId":"kDefaultSpace","objectType":0},{"class":"cScriptObject","name":"MainScript","guid":[1516425449,617956124,2567249954,579591995],"spaceId":"kDefaultSpace","objectType":0},{"class":"cModuleScriptObject","name":"NpcMgrModule","guid":[2200592614,732054892,2510412088,3573524482],"spaceId":"kDefaultSpace","objectType":0},{"class":"cPrimitiveObject","name":"Sphere","guid":[2367310542,290605948,2615944327,1917812362],"spaceId":"kDefaultSpace","objectType":0}],"ObjectsData":[{"class":"cWorkspace","name":"World","guid":[1981988479,3555894,2597800867,69741929],"parentGuid":[0,0,0,0],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"World"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sWorkspaceComponent","data":{}},{"id":11,"class":"sConfigPhysicsComponent","data":{"m_collisionGroupMaskFlags":[0,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}]},{"class":"cWorkspace","name":"Global","guid":[344576033,1668630255,2683907297,2226597768],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Global"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sWorkspaceComponent","data":{}},{"id":11,"class":"sConfigPhysicsComponent","data":{"m_collisionGroupMaskFlags":[0,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}}]},{"class":"cScriptObject","name":"AutoAssignTeamScript","guid":[1988307774,2442019711,2592872571,1277204125],"parentGuid":[344576033,1668630255,2683907297,2226597768],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"AutoAssignTeamScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"function autoAssign()\n    local container = world:FindTeams()\n    local min = 1\n    local teamTojoin = {}\n    for i = 1, #container, 1 do\n        if container[i].CurrentMaxMemberNum > 0 then\n            temp = container[i].CurrentMemberNum / (container[i].CurrentMaxMemberNum)\n            if (temp < min and temp ~= 1) then\n                teamTojoin = {}\n                min = temp\n                table.insert(teamTojoin, container[i])\n            elseif temp == min and temp ~= 1 then\n                table.insert(teamTojoin, container[i])\n            end\n        end\n    end\n    local a = 1\n    if #teamTojoin > 0 then\n        a = math.random(1, #teamTojoin)\n        return teamTojoin[a]\n    else\n        return nil\n    end\nend\n"}}]},{"class":"cScriptObject","name":"LuaFunctionScript","guid":[1414019724,4066527202,2188886684,1950800485],"parentGuid":[344576033,1668630255,2683907297,2226597768],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"LuaFunctionScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"--- 提供一组常用函数，以及对 Lua 标准库的扩展\n-- @script Lua function extension libraries\n-- @author Lilith Games, Avatar Team\n-- @see https://wiki.lilithgames.com/x/tSkMAg\n\n--- 检查并尝试转换为数值，如果无法转换则返回 0\n-- @param mixed value 要检查的值\n-- @param [integer base] 进制，默认为十进制\n-- @return number\nfunction checknumber(value, base)\n    return tonumber(value, base) or 0\nend\n\n--- 检查是否是有效的number类型\n-- @param number\nfunction isValidNumber(num)\n    return num ~= nil and num\nend\n\n--- 检查并尝试转换为整数，如果无法转换则返回 0\n-- @param mixed value 要检查的值\n-- @return integer\nfunction checkint(value)\n    return math.round(checknumber(value))\nend\n\n--- 检查并尝试转换为布尔值，除了 nil 和 false，其他任何值都会返回 true\n-- @param mixed value 要检查的值\n-- @return boolean\nfunction checkbool(value)\n    return (value ~= nil and value ~= false)\nend\n\n--- 检查值是否是一个表格，如果不是则返回一个空表格\n-- @param mixed value 要检查的值\n-- @return table\nfunction checktable(value)\n    if type(value) ~= 'table' then\n        value = {}\n    end\n    return value\nend\n\n--- 处理对象\n-- @param mixed obj Lua 对象\n-- @param function method 对象方法\n-- @return function\nfunction handler(obj, method)\n    return function(...)\n        return method(obj, ...)\n    end\nend\n\n--- 计算表格包含的字段数量\n-- Lua table 的 \"#\" 操作只对依次排序的数值下标数组有效，table.nums() 则计算 table 中所有不为 nil 的值的个数。\n-- @param table\nfunction table.nums(t)\n    if t == nil then\n        return 0\n    end\n    local count = 0\n    for _ in pairs(t) do\n        count = count + 1\n    end\n    return count\nend\n\n--- 返回指定表格中的所有键\n-- @param k-v table\n-- @return keys' table\n-- @usage example\n-- local hashtable = {a = 1, b = 2, c = 3}\n-- local keys = table.keys(hashtable)\n-- >> keys = {\"a\", \"b\", \"c\"}\nfunction table.keys(hashtable)\n    local keys = {}\n    for k, _ in pairs(hashtable) do\n        table.insert(keys, k)\n    end\n    return keys\nend\n\n--- 返回指定表格中的所有值\n-- @param k-v table\n-- @return values' table\n-- @usage example\n-- local hashtable = {a = 1, b = 2, c = 3}\n-- local values = table.values(hashtable)\n-- >> values = {1, 2, 3}\nfunction table.values(hashtable)\n    local values = {}\n    local i = 1\n    for k, v in pairs(hashtable) do\n        values[i] = v\n        i = i + 1\n    end\n    return values\nend\n\n--- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值\n-- @param target table\n-- @param source table\n-- @usage example\n-- local dest = {a = 1, b = 2}\n-- local src  = {c = 3, d = 4}\n-- table.merge(dest, src)\n-- >> dest = {a = 1, b = 2, c = 3, d = 4}\nfunction table.merge(dest, src)\n    for k, v in pairs(src) do\n        dest[k] = v\n    end\nend\n\n--- 深度将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值,如果存在子表,则遍历子表进行复制\nfunction table.deepMerge(dest, src)\n    for k, v in pairs(src) do\n        if type(v) == 'table' then\n            if dest[k] == nil then\n                dest[k] = {}\n            end\n            table.deepMerge(dest[k], v)\n        else\n            dest[k] = v\n        end\n    end\nend\n\n--- 将来源表格中所有键及其值复制到目标表格对象中，如果存在同名键，则覆盖其值\n-- @param ... 多个表，第一个是目标表格\n-- @return 返回一个新表\n---@author Sharif Ma\nfunction table.MergeTables(...)\n    local tabs = {...}\n    if not tabs or #tabs == 0 then\n        return {}\n    end\n    local origin = {}\n    for k, v in pairs(tabs[1]) do\n        origin[k] = v\n    end\n    for i = 2, #tabs do\n        if origin then\n            if tabs[i] then\n                for _, v in pairs(tabs[i]) do\n                    table.insert(origin, v)\n                end\n            end\n        else\n            origin = tabs[i]\n        end\n    end\n    return origin\nend\n\n--- 在目标表格的指定位置插入来源表格，如果没有指定位置则连接两个表格\n-- @param target table\n-- @param source table\n-- @param start index\n-- @usage example #1\n-- local dest = {1, 2, 3}\n-- local src  = {4, 5, 6}\n-- table.insertto(dest, src)\n-- >> dest = {1, 2, 3, 4, 5, 6}\n-- @usage example #2\n-- local dest = {1, 2, 3}\n-- local src  = {4, 5, 6}\n-- table.insertto(dest, src, 5)\n-- >> dest = {1, 2, 3, nil, 4, 5, 6}\nfunction table.insertto(dest, src, begin)\n    if begin == nil then\n        begin = #dest + 1\n    else\n        begin = checkint(begin)\n        if begin <= 0 then\n            begin = #dest + 1\n        end\n    end\n\n    local len = #src\n    for i = 0, len - 1 do\n        dest[i + begin] = src[i + 1]\n    end\nend\n\n--- 从表格中查找指定值，返回其索引，如果没找到返回 false\n-- @param array table\n-- @param target value\n-- @param start index\n-- @return index or false\n-- @usage example\n-- local array = {\"a\", \"b\", \"c\"}\n-- print(table.indexof(array, \"b\"))\n-- >> 2\nfunction table.indexof(array, value, begin)\n    if array ~= nil then\n        for i = begin or 1, #array do\n            if array[i] == value then\n                return i\n            end\n        end\n    end\n    return 0\nend\n\n--- 检查表格中是否存在指定值\n-- @param array table\n-- @param target value\n-- @return @boolean\nfunction table.exists(array, value)\n    return table.indexof(array, value) > 0\nend\n\n--- 清空数组表格\n-- @param array table\nfunction table.cleararray(array)\n    if array ~= nil then\n        local count = #array\n        while count > 0 do\n            table.remove(array, count)\n            count = #array\n        end\n    end\nend\n\n--- 清空k-v表格\n-- @param k-v table\nfunction table.clearhashtable(hashtable)\n    if hashtable ~= nil then\n        for k, v in pairs(hashtable) do\n            hashtable[k] = nil\n        end\n    end\nend\n\n--- 清空表格\n-- @param table\n-- @see table.clearhashtable\nfunction table.cleartable(t)\n    table.clearhashtable(t)\nend\n\n--- 截取Array其中一段，startIndex从1开始 return截取后的新数组\n-- @param table array table\n-- @param @number start index\n-- @param @number length\n-- @return @table array table\n-- @usage example\n-- local array = {\"a\", \"b\", \"c\", \"d\"}\n-- print(table.subArray(array, 2, 2))\n-- >> {\"b\", \"c\"}\nfunction table.subArray(array, startIndex, length)\n    if array ~= nil then\n        local count = table.nums(array)\n        local tempArray = array\n        array = {}\n        if startIndex <= count then\n            local maxlength = count - startIndex + 1\n            length = length > maxlength and maxlength or length\n            local endIndex = startIndex + length - 1\n            for i = startIndex, endIndex do\n                table.insert(array, tempArray[i])\n            end\n        end\n    end\n    return array\nend\n\n--- 截取Array的后半段，startIndex从1开始 return截取后的新数组\n-- @param table array table\n-- @param @number start index\n-- @return @table array table\nfunction table.subArrayByStartIndex(array, startIndex)\n    if array ~= nil then\n        local count = table.nums(array)\n        local length = count - startIndex + 1\n        return table.subArray(array, startIndex, length)\n    end\n    return array\nend\n\n--- 从表格中查找指定值，返回其 key，如果没找到返回 nil\n-- @param table hash table\n-- @param any value\n-- @return key of value\n-- @usage\n-- local hashtable = {name = \"dualface\", comp = \"chukong\"}\n-- print(table.keyof(hashtable, \"chukong\"))\n-- >> comp\nfunction table.keyof(hashtable, value)\n    for k, v in pairs(hashtable) do\n        if v == value then\n            return k\n        end\n    end\n    return nil\nend\n\n--- 从表格中删除指定值，返回删除的值的个数\n-- @usage\n-- local array = {\"a\", \"b\", \"c\", \"c\"}\n-- print(table.removebyvalue(array, \"c\", true))\n-- >> 输出 2\nfunction table.removebyvalue(array, value, removeall)\n    local c, i, max = 0, 1, #array\n    while i <= max do\n        if array[i] == value then\n            table.remove(array, i)\n            c = c + 1\n            i = i - 1\n            max = max - 1\n            if not removeall then\n                break\n            end\n        end\n        i = i + 1\n    end\n    return c\nend\n\n--- 数组混淆\nfunction table.shuffle(_tbl)\n    local j\n    for i = #_tbl, 2, -1 do\n        j = math.random(i)\n        _tbl[i], _tbl[j] = _tbl[j], _tbl[i]\n    end\n    return _tbl\nend\n\n--- 对表格中每一个值执行一次指定的函数，并用函数返回值更新表格内容\n-- @param table\n-- @param function fn 参数指定的函数具有两个参数，并且返回一个值。原型如下：\n-- function map_function(value, key)\n--     return value\n-- end\n-- @usage\n-- local t = {name = \"dualface\", comp = \"chukong\"}\n-- table.map(t, function(v, k)\n--    -- 在每一个值前后添加括号\n--    return \"[\" .. v .. \"]\"\n-- end)\n-- 输出修改后的表格内容\n-- for k, v in pairs(t) do\n--     print(k, v)\n-- end\n-- >> 输出\n-- name [dualface]\n-- comp [chukong]\nfunction table.map(t, fn)\n    for k, v in pairs(t) do\n        t[k] = fn(v, k)\n    end\nend\n\n--- 对表格中每一个值执行一次指定的函数，但不改变表格内容\n-- @param table\n-- @param function fn 参数指定的函数具有两个参数，没有返回值。原型如下：\n-- function map_function(value, key)\n--     -- no return here\n-- end\n-- @usage\n-- local t = {name = \"dualface\", comp = \"chukong\"}\n-- table.walk(t, function(v, k)\n--     -- 输出每一个值\n--     print(v)\n-- end)\nfunction table.walk(t, fn)\n    for k, v in pairs(t) do\n        fn(v, k)\n    end\nend\n\n--- 对表格中每一个值执行一次指定的函数，如果该函数返回 false，则对应的值会从表格中删除\n-- @param table\n-- @param function fn 参数指定的函数具有两个参数，并且返回一个 boolean 值。原型如下：\n-- !!!!该方法有局限性，执行后会修改原表格t中值\n-- function map_function(value, key)\n--     return true or false\n-- end\n-- @usage\n-- local t = {name = \"dualface\", comp = \"chukong\"}\n-- table.filter(t, function(v, k)\n--     return v ~= \"dualface\" -- 当值等于 dualface 时过滤掉该值\n-- end)\n-- 输出修改后的表格内容\n-- for k, v in pairs(t) do\n--     print(k, v)\n-- end\n-- >> 输出 comp chukong\nfunction table.filter(t, fn)\n    for k, v in pairs(t) do\n        if not fn(v, k) then\n            t[k] = nil\n        end\n    end\nend\n\n--- 找到表格中每个符合matchFunc的条目\n-- @param array table\n-- @param match function, return T/F\n-- @return all elements matched, default is {}\nfunction table.findAll(array, matchFunc)\n    local ret, idx = {}, 1\n    for i = 1, #array do\n        if matchFunc(array[i]) then\n            ret[idx] = array[i]\n            idx = idx + 1\n        end\n    end\n    return ret\nend\n\n--- 找到表格中每个符合matchFunc的条目，并执行walkFunc\n-- @param array table\n-- @param match function, return T/F\n-- @param walk function\nfunction table.findAllAndWalk(array, matchFunc, walkFunc)\n    for i = 1, #array do\n        if matchFunc(array[i]) then\n            walkFunc(array[i])\n        end\n    end\nend\n\n--- 在表格中插入一个新值\n-- @param array table\n-- @param new element\nfunction table.insert_once(T, elem)\n    for _, v in ipairs(T) do\n        if v == elem then\n            return\n        end\n    end\n    table.insert(T, elem)\nend\n\n--- 遍历表格，确保其中的值唯一\n-- @function [parent=#table] unique\n-- @param table t 表格\n-- @param boolean bArray t是否是数组,是数组,t中重复的项被移除后,后续的项会前移\n-- @return table#table  包含所有唯一值的新表格\n-- @usage\n-- 遍历表格，确保其中的值唯一\n-- local t = {\"a\", \"a\", \"b\", \"c\"} -- 重复的 a 会被过滤掉\n-- local n = table.unique(t)\n-- for k, v in pairs(n) do\n--     print(v)\n-- end\n-- >> 输出 a b c\nfunction table.unique(t, bArray)\n    local check = {}\n    local n = {}\n    local idx = 1\n    for k, v in pairs(t) do\n        if not check[v] then\n            if bArray then\n                n[idx] = v\n                idx = idx + 1\n            else\n                n[k] = v\n            end\n            check[v] = true\n        end\n    end\n    return n\nend\n\n--- table 深度复制\n-- @param table\n-- @return a net table with same data\nfunction table.deepcopy(object)\n    local lookup_table = {}\n    local function _copy(object)\n        if type(object) ~= 'table' then\n            return object\n        elseif lookup_table[object] then\n            return lookup_table[object]\n        end\n        local new_table = {}\n        lookup_table[object] = new_table\n        for key, value in pairs(object) do\n            new_table[_copy(key)] = _copy(value)\n        end\n        return setmetatable(new_table, getmetatable(object))\n    end\n    return _copy(object)\nend\n\n--- table 浅度复制(不处理metatable)\nfunction table.shallowcopy(orig)\n    local orig_type = type(orig)\n    local copy\n    if orig_type == 'table' then\n        copy = {}\n        for orig_key, orig_value in next, orig, nil do\n            copy[table.shallowcopy(orig_key)] = table.shallowcopy(orig_value)\n        end\n    else\n        copy = orig\n    end\n    return copy\nend\n\n--- 获取or创建一个子表\nfunction table.need(tb, key)\n    if type(tb) == 'table' then\n        local subTb = tb[key]\n        if subTb == nil then\n            subTb = {}\n            tb[key] = subTb\n        end\n        return subTb\n    end\n    return\nend\n\n--- 打印table中的所有内容\n-- @param data table\n-- @param @boolean showMetatable 是否显示元表\nfunction table.dump(data, showMetatable)\n    local result, tab = {}, '    '\n    local function _dump(data, showMetatable, lastCount)\n        if type(data) ~= 'table' then\n            if type(data) == 'string' then\n                table.insert(result, '\"')\n                table.insert(result, data)\n                table.insert(result, '\"')\n            else\n                table.insert(result, tostring(data))\n            end\n        else\n            --Format\n            local count = lastCount or 0\n            count = count + 1\n            table.insert(result, '{\\n')\n            --Metatable\n            if showMetatable then\n                for i = 1, count do\n                    table.insert(result, tab)\n                end\n                local mt = getmetatable(data)\n                table.insert(result, '\"__metatable\" = ')\n                _dump(mt, showMetatable, count)\n                table.insert(result, ',\\n')\n            end\n            --Key\n            for key, value in pairs(data) do\n                for i = 1, count do\n                    table.insert(result, tab)\n                end\n                if type(key) == 'string' then\n                    table.insert(result, '\"')\n                    table.insert(result, key)\n                    table.insert(result, '\" = ')\n                elseif type(key) == 'number' then\n                    table.insert(result, '[')\n                    table.insert(result, key)\n                    table.insert(result, '] = ')\n                else\n                    table.insert(result, tostring(key))\n                end\n                _dump(value, showMetatable, count)\n                table.insert(result, ',\\n')\n            end\n            --Format\n            for i = 1, lastCount or 0 do\n                table.insert(result, tab)\n            end\n            table.insert(result, '}')\n        end\n        --Format\n        if not lastCount then\n            table.insert(result, '\\n')\n        end\n    end\n    _dump(data, showMetatable, 0)\n\n    -- print('dump: \\n' .. table.concat(result))\n    return 'dump: \\n' .. table.concat(result)\nend\n\n--- 用指定字符或字符串分割输入字符串，返回包含分割结果的数组\n-- @param @string input 输入的字符串\n-- @param @string delimiter 分隔符\n-- @return array\n-- @usage example #1\n-- local input = \"Hello,World\"\n-- local res = string.split(input, \",\")\n-- >> res = {\"Hello\", \"World\"}\n-- @usage example #2\n-- local input = \"Hello-+-World-+-Quick\"\n-- local res = string.split(input, \"-+-\")\n-- >> res = {\"Hello\", \"World\", \"Quick\"}\nfunction string.split(input, delimiter)\n    input = tostring(input)\n    delimiter = tostring(delimiter)\n    if (delimiter == '') then\n        return false\n    end\n    local pos, arr = 0, {}\n    -- for each divider found\n    for st, sp in function()\n        return string.find(input, delimiter, pos, true)\n    end do\n        table.insert(arr, string.sub(input, pos, st - 1))\n        pos = sp + 1\n    end\n    table.insert(arr, string.sub(input, pos))\n    return arr\nend\n\n--- 判断字符串是否为空或者长度为零\n-- @param @string 输入的字符串\nfunction string.isnilorempty(inputStr)\n    return inputStr == nil or inputStr == ''\nend\n\n--- 去除输入字符串头部的空白字符，返回结果\n-- @param @string input\n-- @return @string\n-- @usage example\n-- local input = \"  ABC\"\n-- print(string.ltrim(input))\n-- >> 输出 ABC，输入字符串前面的两个空格被去掉了\n-- 空白字符包括：\n-- -   空格\n-- -   制表符 \\t\n-- -   换行符 \\n\n-- -   回到行首符 \\r\nfunction string.ltrim(input)\n    return string.gsub(input, '^[ \\t\\n\\r]+', '')\nend\n\n--- 去除输入字符串尾部的空白字符，返回结果\n-- @param @string input\n-- @return @string\n-- @usage example\n-- local input = \"ABC  \"\n-- print(string.rtrim(input))\n-- >> 输出 ABC，输入字符串最后的两个空格被去掉了\nfunction string.rtrim(input)\n    return string.gsub(input, '[ \\t\\n\\r]+$', '')\nend\n\n--- 去掉字符串首尾的空白字符，返回结果\n-- @param @string input\n-- @return @string\nfunction string.trim(input)\n    input = string.gsub(input, '^[ \\t\\n\\r]+', '')\n    return string.gsub(input, '[ \\t\\n\\r]+$', '')\nend\n\n--- 将字符串的第一个字符转为大写，返回结果\n-- @param @string input\n-- @return @string\n-- @usage example\n-- local input = \"hello\"\n-- print(string.ucfirst(input))\n-- >> 输出 Hello\nfunction string.ucfirst(input)\n    return string.upper(string.sub(input, 1, 1)) .. string.sub(input, 2)\nend\n\nfunction string.firstToUpper(str)\n    return (str:gsub('^%l', string.upper))\nend\n\n--- 计算 UTF8 字符串的长度，每一个中文算一个字符\n-- @param @string input\n-- @return @number cnt\n-- @usage example\n-- local input = \"你好World\"\n-- print(string.utf8len(input))\n-- >> 输出 7\nfunction string.utf8len(input)\n    local len = string.len(input)\n    local left = len\n    local cnt = 0\n    local arr = {0, 0xc0, 0xe0, 0xf0, 0xf8, 0xfc}\n    while left ~= 0 do\n        local tmp = string.byte(input, -left)\n        local i = #arr\n        while arr[i] do\n            if tmp >= arr[i] then\n                left = left - i\n                break\n            end\n            i = i - 1\n        end\n        cnt = cnt + 1\n    end\n    return cnt\nend\n\n--- 替换字符串内容\n-- @param @string input\n-- @param @number start index\n-- @param new context\n-- @return a new string\nfunction string.replace(str, index, char)\n    return table.concat {str:sub(1, index - 1), char, str:sub(index + 1)}\nend\n\n--- 检查字符串是否为指定字符串开头\n-- @param @string target\n-- @param @string start\n-- @return @boolean\nfunction string.startswith(str, start)\n    return str:sub(1, #start) == start\nend\n\n--- 检查字符串是否以指定字符串结尾\n-- @param @string target\n-- @param @string start\n-- @return @boolean\nfunction string.endswith(str, ending)\n    return ending == '' or str:sub(-(#ending)) == ending\nend\n\n--- 四舍五入\n-- @param a number\n-- @return a round number\nfunction math.round(value)\n    return math.floor(value + 0.5)\nend\n\n--- [0, 1]区间限定函数\n-- @param a number\n-- @return a clamped number\nfunction math.clamp01(value)\n    return math.min(1, math.max(0, value))\nend\n\n---最小数值和最大数值指定返回值的范围\n-- @param a number\n-- @param min threshold\n-- @param max threshold\n-- @return a clamped number\nfunction math.Clamp(value, min, max)\n    if value < min then\n        return min\n    end\n    if value > max then\n        return max\n    end\n    return value\nend\n\n--- 高斯岁间变量\nfunction math.GaussRandom()\n    local u = math.random()\n    local v = math.random()\n    local z = math.sqrt(-2 * math.log(u)) * math.cos(2 * math.pi * v)\n    z = (z + 3) / 6\n    z = 2 * z - 1\n    if (math.abs(z) > 1) then\n        return math.GaussRandom()\n    end\n    return z\nend\n\n--- 数据结构 队列\n-- @usage queue example\n-- local myQueue = Queue:New()\n-- myQueue:Enqueue('a')\n-- myQueue:Enqueue('b')\n-- myQueue:Enqueue('c')\n-- myQueue:PrintElement()\n-- print(myQueue:Dequeue())\n-- myQueue:PrintElement()\n-- myQueue:Clear()\n-- myQueue:PrintElement()\nQueue = {}\nfunction Queue:New()\n    local inst = {\n        _first = -1,\n        _last = -1,\n        _size = 0,\n        _queue = {}\n    }\n    setmetatable(inst, {__index = self})\n    return inst\nend\n\nfunction Queue:IsEmpty()\n    if self._size == 0 then\n        return true\n    end\n    return false\nend\n\nfunction Queue:Enqueue(inElement)\n    if self._size == 0 then\n        self._first = 0\n        self._last = 1\n        self._size = 1\n        self._queue[self._last] = inElement\n    else\n        self._last = self._last + 1\n        self._queue[self._last] = inElement\n        self._size = self._size + 1\n    end\nend\n\nfunction Queue:Dequeue()\n    if self:IsEmpty() then\n        print('Error: the queue is empty')\n        return\n    end\n    self._size = self._size - 1\n    self._first = self._first + 1\n    local value = self._queue[self._first]\n    return value\nend\n\nfunction Queue:Clear()\n    self._queue = nil\n    self._queue = {}\n    self._size = 0\n    self._first = -1\n    self._last = -1\nend\n\nfunction Queue:Size()\n    return self._size or 0\nend\n\nfunction Queue:PrintElement()\n    if self._size == 0 then\n        print('{}')\n    else\n        local f = self._first + 1\n        local l = self._last\n        local str\n        local flag = true\n        while f ~= l do\n            if flag == true then\n                str = '{' .. tostring(self._queue[f])\n                f = f + 1\n                flag = false\n            else\n                str = str .. ',' .. tostring(self._queue[f])\n                f = f + 1\n            end\n        end\n        str = str .. ',' .. tostring(self._queue[l]) .. '}'\n        print(str)\n    end\nend\n\nfunction Queue:GetValue(index)\n    if self:IsEmpty() or index == nil or index == 0 then\n        print('Error: Get Value Failure!')\n        return\n    end\n    if index > 0 then\n        return self._queue[self._first + index]\n    else\n        return self._queue[self._last + index + 1]\n    end\nend\n\nfunction Queue:GetValues()\n    if self:IsEmpty() then\n        return\n    end\n    local data = {}\n    for i = self._first + 1, self._last, 1 do\n        data[#data + 1] = self._queue[i]\n    end\n    return data\nend\n\n--- 数据结构 栈\n-- @usage example\n-- local myStack = Stack:New()\n-- myStack:Push(\"a\")\n-- myStack:Push(\"b\")\n-- myStack:Push(\"c\")\n-- myStack:PrintElement()\n-- print(myStack:Pop())\n-- myStack:PrintElement()\n-- myStack:Clear()\n-- myStack:PrintElement()\nStack = {}\nfunction Stack:New()\n    local inst = {\n        _last = 0,\n        _stack = {}\n    }\n    setmetatable(inst, {__index = self})\n\n    return inst\nend\n\nfunction Stack:IsEmpty()\n    if self._last == 0 then\n        return true\n    end\n    return false\nend\n\nfunction Stack:Push(inElement)\n    self._last = self._last + 1\n    self._stack[self._last] = inElement\nend\n\nfunction Stack:Pop()\n    if self:IsEmpty() then\n        --print(\"Error: the stack is empty\")\n        return\n    end\n    local value = self._stack[self._last]\n    self._stack[self._last] = nil\n    self._last = self._last - 1\n    return value\nend\n\nfunction Stack:Exists(element, compairFunc)\n    if compairFunc == nil then\n        compairFunc = function(a, b)\n            return a == b\n        end\n    end\n    for i = self._last, 1, -1 do\n        if compairFunc(element, self._stack[i]) then\n            return i\n        end\n    end\n    return -1\nend\n\nfunction Stack:RemoveAt(index)\n    if index < 1 or index > self._last then\n        return\n    end\n    table.remove(self._stack, index)\n    self._last = self._last - 1\nend\n\nfunction Stack:Clear()\n    self._stack = nil\n    self._stack = {}\n    self._last = 0\nend\n\nfunction Stack:Size()\n    return self._last\nend\n\nfunction Stack:PrintElement()\n    local str = '{'\n    for i = self._last, 1, -1 do\n        str = str .. tostring(self._stack[i]) .. ','\n    end\n    str = str .. '}'\n    print(str)\nend\n"}}]},{"class":"cScriptObject","name":"BTreeMainScript","guid":[2838117710,727861174,2541291470,2717323588],"parentGuid":[344576033,1668630255,2683907297,2226597768],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"BTreeMainScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"JSON = require(BTreePlugin.JsonModule)\nB3 = require(BTreePlugin.B3Module)\nprint(B3.VERSION)\n"}}]},{"class":"cDataStoreObject","name":"DataStore","guid":[2838802579,436619052,2516973442,4240601818],"parentGuid":[344576033,1668630255,2683907297,2226597768],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"DataStore"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":200,"class":"sDataStoreComponent","data":{"m_dataSheet":[],"m_archive":[]}}]},{"class":"cFolderObject","name":"BTreePlugin","guid":[2876989748,2457488097,2382853771,4121614769],"parentGuid":[344576033,1668630255,2683907297,2226597768],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"BTreePlugin"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cModuleScriptObject","name":"JsonModule","guid":[2281794680,2200063571,3179761180,2263430375],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"JsonModule"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"-- -*- coding: utf-8 -*-\n--\n-- Simple JSON encoding and decoding in pure Lua.\n--\n-- Copyright 2010-2016 Jeffrey Friedl\n-- http://regex.info/blog/\n-- Latest version: http://regex.info/blog/lua/json\n--\n-- This code is released under a Creative Commons CC-BY \"Attribution\" License:\n-- http://creativecommons.org/licenses/by/3.0/deed.en_US\n--\n-- It can be used for any purpose so long as:\n--    1) the copyright notice above is maintained\n--    2) the web-page links above are maintained\n--    3) the 'AUTHOR_NOTE' string below is maintained\n--\nlocal VERSION = '20161109.21' -- version history at end of file\nlocal AUTHOR_NOTE = '-[ JSON.lua package by Jeffrey Friedl (http://regex.info/blog/lua/json) version 20161109.21 ]-'\n\n--\n-- The 'AUTHOR_NOTE' variable exists so that information about the source\n-- of the package is maintained even in compiled versions. It's also\n-- included in OBJDEF below mostly to quiet warnings about unused variables.\n--\nlocal OBJDEF = {\n    VERSION = VERSION,\n    AUTHOR_NOTE = AUTHOR_NOTE\n}\n\n--\n-- Simple JSON encoding and decoding in pure Lua.\n-- JSON definition: http://www.json.org/\n--\n--\n--   JSON = assert(loadfile \"JSON.lua\")() -- one-time load of the routines\n--\n--   local lua_value = JSON:decode(raw_json_text)\n--\n--   local raw_json_text    = JSON:encode(lua_table_or_value)\n--   local pretty_json_text = JSON:encode_pretty(lua_table_or_value) -- \"pretty printed\" version for human readability\n--\n--\n--\n-- DECODING (from a JSON string to a Lua table)\n--\n--\n--   JSON = assert(loadfile \"JSON.lua\")() -- one-time load of the routines\n--\n--   local lua_value = JSON:decode(raw_json_text)\n--\n--   If the JSON text is for an object or an array, e.g.\n--     { \"what\": \"books\", \"count\": 3 }\n--   or\n--     [ \"Larry\", \"Curly\", \"Moe\" ]\n--\n--   the result is a Lua table, e.g.\n--     { what = \"books\", count = 3 }\n--   or\n--     { \"Larry\", \"Curly\", \"Moe\" }\n--\n--\n--   The encode and decode routines accept an optional second argument,\n--   \"etc\", which is not used during encoding or decoding, but upon error\n--   is passed along to error handlers. It can be of any type (including nil).\n--\n--\n--\n-- ERROR HANDLING\n--\n--   With most errors during decoding, this code calls\n--\n--      JSON:onDecodeError(message, text, location, etc)\n--\n--   with a message about the error, and if known, the JSON text being\n--   parsed and the byte count where the problem was discovered. You can\n--   replace the default JSON:onDecodeError() with your own function.\n--\n--   The default onDecodeError() merely augments the message with data\n--   about the text and the location if known (and if a second 'etc'\n--   argument had been provided to decode(), its value is tacked onto the\n--   message as well), and then calls JSON.assert(), which itself defaults\n--   to Lua's built-in assert(), and can also be overridden.\n--\n--   For example, in an Adobe Lightroom plugin, you might use something like\n--\n--          function JSON:onDecodeError(message, text, location, etc)\n--             LrErrors.throwUserError(\"Internal Error: invalid JSON data\")\n--          end\n--\n--   or even just\n--\n--          function JSON.assert(message)\n--             LrErrors.throwUserError(\"Internal Error: \" .. message)\n--          end\n--\n--   If JSON:decode() is passed a nil, this is called instead:\n--\n--      JSON:onDecodeOfNilError(message, nil, nil, etc)\n--\n--   and if JSON:decode() is passed HTML instead of JSON, this is called:\n--\n--      JSON:onDecodeOfHTMLError(message, text, nil, etc)\n--\n--   The use of the fourth 'etc' argument allows stronger coordination\n--   between decoding and error reporting, especially when you provide your\n--   own error-handling routines. Continuing with the the Adobe Lightroom\n--   plugin example:\n--\n--          function JSON:onDecodeError(message, text, location, etc)\n--             local note = \"Internal Error: invalid JSON data\"\n--             if type(etc) = 'table' and etc.photo then\n--                note = note .. \" while processing for \" .. etc.photo:getFormattedMetadata('fileName')\n--             end\n--             LrErrors.throwUserError(note)\n--          end\n--\n--            :\n--            :\n--\n--          for i, photo in ipairs(photosToProcess) do\n--               :\n--               :\n--               local data = JSON:decode(someJsonText, { photo = photo })\n--               :\n--               :\n--          end\n--\n--\n--\n--   If the JSON text passed to decode() has trailing garbage (e.g. as with the JSON \"[123]xyzzy\"),\n--   the method\n--\n--       JSON:onTrailingGarbage(json_text, location, parsed_value, etc)\n--\n--   is invoked, where:\n--\n--       json_text is the original JSON text being parsed,\n--       location is the count of bytes into json_text where the garbage starts (6 in the example),\n--       parsed_value is the Lua result of what was successfully parsed ({123} in the example),\n--       etc is as above.\n--\n--   If JSON:onTrailingGarbage() does not abort, it should return the value decode() should return,\n--   or nil + an error message.\n--\n--     local new_value, error_message = JSON:onTrailingGarbage()\n--\n--   The default handler just invokes JSON:onDecodeError(\"trailing garbage\"...), but you can have\n--   this package ignore trailing garbage via\n--\n--      function JSON:onTrailingGarbage(json_text, location, parsed_value, etc)\n--         return parsed_value\n--      end\n--\n--\n-- DECODING AND STRICT TYPES\n--\n--   Because both JSON objects and JSON arrays are converted to Lua tables,\n--   it's not normally possible to tell which original JSON type a\n--   particular Lua table was derived from, or guarantee decode-encode\n--   round-trip equivalency.\n--\n--   However, if you enable strictTypes, e.g.\n--\n--      JSON = assert(loadfile \"JSON.lua\")() --load the routines\n--      JSON.strictTypes = true\n--\n--   then the Lua table resulting from the decoding of a JSON object or\n--   JSON array is marked via Lua metatable, so that when re-encoded with\n--   JSON:encode() it ends up as the appropriate JSON type.\n--\n--   (This is not the default because other routines may not work well with\n--   tables that have a metatable set, for example, Lightroom API calls.)\n--\n--\n-- ENCODING (from a lua table to a JSON string)\n--\n--   JSON = assert(loadfile \"JSON.lua\")() -- one-time load of the routines\n--\n--   local raw_json_text    = JSON:encode(lua_table_or_value)\n--   local pretty_json_text = JSON:encode_pretty(lua_table_or_value) -- \"pretty printed\" version for human readability\n--   local custom_pretty    = JSON:encode(lua_table_or_value, etc, { pretty = true, indent = \"|  \", align_keys = false })\n--\n--   On error during encoding, this code calls:\n--\n--     JSON:onEncodeError(message, etc)\n--\n--   which you can override in your local JSON object.\n--\n--   The 'etc' in the error call is the second argument to encode()\n--   and encode_pretty(), or nil if it wasn't provided.\n--\n--\n-- ENCODING OPTIONS\n--\n--   An optional third argument, a table of options, can be provided to encode().\n--\n--       encode_options =  {\n--           -- options for making \"pretty\" human-readable JSON (see \"PRETTY-PRINTING\" below)\n--           pretty         = true,\n--           indent         = \"   \",\n--           align_keys     = false,\n--           array_newline  = false,\n--\n--           -- other output-related options\n--           null           = \"\\0\",   -- see \"ENCODING JSON NULL VALUES\" below\n--           stringsAreUtf8 = false,  -- see \"HANDLING UNICODE LINE AND PARAGRAPH SEPARATORS FOR JAVA\" below\n--       }\n--\n--       json_string = JSON:encode(mytable, etc, encode_options)\n--\n--\n--\n-- For reference, the defaults are:\n--\n--           pretty         = false\n--           null           = nil,\n--           stringsAreUtf8 = false,\n--           array_newline  = false,\n--\n--\n--\n-- PRETTY-PRINTING\n--\n--   Enabling the 'pretty' encode option helps generate human-readable JSON.\n--\n--     pretty = JSON:encode(val, etc, {\n--                                       pretty = true,\n--                                       indent = \"   \",\n--                                       align_keys = false,\n--                                     })\n--\n--   encode_pretty() is also provided: it's identical to encode() except\n--   that encode_pretty() provides a default options table if none given in the call:\n--\n--       { pretty = true, align_keys = false, indent = \"  \" }\n--\n--   For example, if\n--\n--      JSON:encode(data)\n--\n--   produces:\n--\n--      {\"city\":\"Kyoto\",\"climate\":{\"avg_temp\":16,\"humidity\":\"high\",\"snowfall\":\"minimal\"},\"country\":\"Japan\",\"wards\":11}\n--\n--   then\n--\n--      JSON:encode_pretty(data)\n--\n--   produces:\n--\n--      {\n--        \"city\": \"Kyoto\",\n--        \"climate\": {\n--          \"avg_temp\": 16,\n--          \"humidity\": \"high\",\n--          \"snowfall\": \"minimal\"\n--        },\n--        \"country\": \"Japan\",\n--        \"wards\": 11\n--      }\n--\n--   The following three lines return identical results:\n--       JSON:encode_pretty(data)\n--       JSON:encode_pretty(data, nil, { pretty = true, align_keys = false, indent = \"  \" })\n--       JSON:encode       (data, nil, { pretty = true, align_keys = false, indent = \"  \" })\n--\n--   An example of setting your own indent string:\n--\n--     JSON:encode_pretty(data, nil, { pretty = true, indent = \"|    \" })\n--\n--   produces:\n--\n--      {\n--      |    \"city\": \"Kyoto\",\n--      |    \"climate\": {\n--      |    |    \"avg_temp\": 16,\n--      |    |    \"humidity\": \"high\",\n--      |    |    \"snowfall\": \"minimal\"\n--      |    },\n--      |    \"country\": \"Japan\",\n--      |    \"wards\": 11\n--      }\n--\n--   An example of setting align_keys to true:\n--\n--     JSON:encode_pretty(data, nil, { pretty = true, indent = \"  \", align_keys = true })\n--\n--   produces:\n--\n--      {\n--           \"city\": \"Kyoto\",\n--        \"climate\": {\n--                     \"avg_temp\": 16,\n--                     \"humidity\": \"high\",\n--                     \"snowfall\": \"minimal\"\n--                   },\n--        \"country\": \"Japan\",\n--          \"wards\": 11\n--      }\n--\n--   which I must admit is kinda ugly, sorry. This was the default for\n--   encode_pretty() prior to version 20141223.14.\n--\n--\n--  HANDLING UNICODE LINE AND PARAGRAPH SEPARATORS FOR JAVA\n--\n--    If the 'stringsAreUtf8' encode option is set to true, consider Lua strings not as a sequence of bytes,\n--    but as a sequence of UTF-8 characters.\n--\n--    Currently, the only practical effect of setting this option is that Unicode LINE and PARAGRAPH\n--    separators, if found in a string, are encoded with a JSON escape instead of being dumped as is.\n--    The JSON is valid either way, but encoding this way, apparently, allows the resulting JSON\n--    to also be valid Java.\n--\n--  AMBIGUOUS SITUATIONS DURING THE ENCODING\n--\n--   During the encode, if a Lua table being encoded contains both string\n--   and numeric keys, it fits neither JSON's idea of an object, nor its\n--   idea of an array. To get around this, when any string key exists (or\n--   when non-positive numeric keys exist), numeric keys are converted to\n--   strings.\n--\n--   For example,\n--     JSON:encode({ \"one\", \"two\", \"three\", SOMESTRING = \"some string\" }))\n--   produces the JSON object\n--     {\"1\":\"one\",\"2\":\"two\",\"3\":\"three\",\"SOMESTRING\":\"some string\"}\n--\n--   To prohibit this conversion and instead make it an error condition, set\n--      JSON.noKeyConversion = true\n--\n--\n-- ENCODING JSON NULL VALUES\n--\n--   Lua tables completely omit keys whose value is nil, so without special handling there's\n--   no way to get a field in a JSON object with a null value.  For example\n--      JSON:encode({ username = \"admin\", password = nil })\n--   produces\n--      {\"username\":\"admin\"}\n--\n--   In order to actually produce\n--      {\"username\":\"admin\", \"password\":null}\n--   one can include a string value for a \"null\" field in the options table passed to encode()....\n--   any Lua table entry with that value becomes null in the JSON output:\n--      JSON:encode({ username = \"admin\", password = \"xyzzy\" }, nil, { null = \"xyzzy\" })\n--   produces\n--      {\"username\":\"admin\", \"password\":null}\n--\n--   Just be sure to use a string that is otherwise unlikely to appear in your data.\n--   The string \"\\0\" (a string with one null byte) may well be appropriate for many applications.\n--\n--   The \"null\" options also applies to Lua tables that become JSON arrays.\n--      JSON:encode({ \"one\", \"two\", nil, nil })\n--   produces\n--      [\"one\",\"two\"]\n--   while\n--      NULL = \"\\0\"\n--      JSON:encode({ \"one\", \"two\", NULL, NULL}, nil, { null = NULL })\n--   produces\n--      [\"one\",\"two\",null,null]\n--\n--\n--\n--\n-- HANDLING LARGE AND/OR PRECISE NUMBERS\n--\n--\n--   Without special handling, numbers in JSON can lose precision in Lua.\n--   For example:\n--\n--      T = JSON:decode('{  \"small\":12345, \"big\":12345678901234567890123456789, \"precise\":9876.67890123456789012345  }')\n--\n--      print(\"small:   \",  type(T.small),    T.small)\n--      print(\"big:     \",  type(T.big),      T.big)\n--      print(\"precise: \",  type(T.precise),  T.precise)\n--\n--   produces\n--\n--      small:          number  12345\n--      big:            number  1.2345678901235e+28\n--      precise:        number  9876.6789012346\n--\n--   Precision is lost with both 'big' and 'precise'.\n--\n--   This package offers ways to try to handle this better (for some definitions of \"better\")...\n--\n--   The most precise method is by setting the global:\n--\n--      JSON.decodeNumbersAsObjects = true\n--\n--   When this is set, numeric JSON data is encoded into Lua in a form that preserves the exact\n--   JSON numeric presentation when re-encoded back out to JSON, or accessed in Lua as a string.\n--\n--   (This is done by encoding the numeric data with a Lua table/metatable that returns\n--   the possibly-imprecise numeric form when accessed numerically, but the original precise\n--   representation when accessed as a string. You can also explicitly access\n--   via JSON:forceString() and JSON:forceNumber())\n--\n--   Consider the example above, with this option turned on:\n--\n--      JSON.decodeNumbersAsObjects = true\n--\n--      T = JSON:decode('{  \"small\":12345, \"big\":12345678901234567890123456789, \"precise\":9876.67890123456789012345  }')\n--\n--      print(\"small:   \",  type(T.small),    T.small)\n--      print(\"big:     \",  type(T.big),      T.big)\n--      print(\"precise: \",  type(T.precise),  T.precise)\n--\n--   This now produces:\n--\n--      small:          table   12345\n--      big:            table   12345678901234567890123456789\n--      precise:        table   9876.67890123456789012345\n--\n--   However, within Lua you can still use the values (e.g. T.precise in the example above) in numeric\n--   contexts. In such cases you'll get the possibly-imprecise numeric version, but in string contexts\n--   and when the data finds its way to this package's encode() function, the original full-precision\n--   representation is used.\n--\n--   Even without using the JSON.decodeNumbersAsObjects option, you can encode numbers\n--   in your Lua table that retain high precision upon encoding to JSON, by using the JSON:asNumber()\n--   function:\n--\n--      T = {\n--         imprecise = 123456789123456789.123456789123456789,\n--         precise   = JSON:asNumber(\"123456789123456789.123456789123456789\")\n--      }\n--\n--      print(JSON:encode_pretty(T))\n--\n--   This produces:\n--\n--      {\n--         \"precise\": 123456789123456789.123456789123456789,\n--         \"imprecise\": 1.2345678912346e+17\n--      }\n--\n--\n--\n--   A different way to handle big/precise JSON numbers is to have decode() merely return\n--   the exact string representation of the number instead of the number itself.\n--   This approach might be useful when the numbers are merely some kind of opaque\n--   object identifier and you want to work with them in Lua as strings anyway.\n--\n--   This approach is enabled by setting\n--\n--      JSON.decodeIntegerStringificationLength = 10\n--\n--   The value is the number of digits (of the integer part of the number) at which to stringify numbers.\n--\n--   Consider our previous example with this option set to 10:\n--\n--      JSON.decodeIntegerStringificationLength = 10\n--\n--      T = JSON:decode('{  \"small\":12345, \"big\":12345678901234567890123456789, \"precise\":9876.67890123456789012345  }')\n--\n--      print(\"small:   \",  type(T.small),    T.small)\n--      print(\"big:     \",  type(T.big),      T.big)\n--      print(\"precise: \",  type(T.precise),  T.precise)\n--\n--   This produces:\n--\n--      small:          number  12345\n--      big:            string  12345678901234567890123456789\n--      precise:        number  9876.6789012346\n--\n--   The long integer of the 'big' field is at least JSON.decodeIntegerStringificationLength digits\n--   in length, so it's converted not to a Lua integer but to a Lua string. Using a value of 0 or 1 ensures\n--   that all JSON numeric data becomes strings in Lua.\n--\n--   Note that unlike\n--      JSON.decodeNumbersAsObjects = true\n--   this stringification is simple and unintelligent: the JSON number simply becomes a Lua string, and that's the end of it.\n--   If the string is then converted back to JSON, it's still a string. After running the code above, adding\n--      print(JSON:encode(T))\n--   produces\n--      {\"big\":\"12345678901234567890123456789\",\"precise\":9876.6789012346,\"small\":12345}\n--   which is unlikely to be desired.\n--\n--   There's a comparable option for the length of the decimal part of a number:\n--\n--      JSON.decodeDecimalStringificationLength\n--\n--   This can be used alone or in conjunction with\n--\n--      JSON.decodeIntegerStringificationLength\n--\n--   to trip stringification on precise numbers with at least JSON.decodeIntegerStringificationLength digits after\n--   the decimal point.\n--\n--   This example:\n--\n--      JSON.decodeIntegerStringificationLength = 10\n--      JSON.decodeDecimalStringificationLength =  5\n--\n--      T = JSON:decode('{  \"small\":12345, \"big\":12345678901234567890123456789, \"precise\":9876.67890123456789012345  }')\n--\n--      print(\"small:   \",  type(T.small),    T.small)\n--      print(\"big:     \",  type(T.big),      T.big)\n--      print(\"precise: \",  type(T.precise),  T.precise)\n--\n--  produces:\n--\n--      small:          number  12345\n--      big:            string  12345678901234567890123456789\n--      precise:        string  9876.67890123456789012345\n--\n--\n--\n--\n--\n-- SUMMARY OF METHODS YOU CAN OVERRIDE IN YOUR LOCAL LUA JSON OBJECT\n--\n--    assert\n--    onDecodeError\n--    onDecodeOfNilError\n--    onDecodeOfHTMLError\n--    onTrailingGarbage\n--    onEncodeError\n--\n--  If you want to create a separate Lua JSON object with its own error handlers,\n--  you can reload JSON.lua or use the :new() method.\n--\n---------------------------------------------------------------------------\n\nlocal default_pretty_indent = '  '\nlocal default_pretty_options = {pretty = true, align_keys = false, indent = default_pretty_indent}\n\nlocal isArray = {\n    __tostring = function()\n        return 'JSON array'\n    end\n}\nisArray.__index = isArray\nlocal isObject = {\n    __tostring = function()\n        return 'JSON object'\n    end\n}\nisObject.__index = isObject\n\nfunction OBJDEF:newArray(tbl)\n    return setmetatable(tbl or {}, isArray)\nend\n\nfunction OBJDEF:newObject(tbl)\n    return setmetatable(tbl or {}, isObject)\nend\n\nlocal function getnum(op)\n    return type(op) == 'number' and op or op.N\nend\n\nlocal isNumber = {\n    __tostring = function(T)\n        return T.S\n    end,\n    __unm = function(op)\n        return getnum(op)\n    end,\n    __concat = function(op1, op2)\n        return tostring(op1) .. tostring(op2)\n    end,\n    __add = function(op1, op2)\n        return getnum(op1) + getnum(op2)\n    end,\n    __sub = function(op1, op2)\n        return getnum(op1) - getnum(op2)\n    end,\n    __mul = function(op1, op2)\n        return getnum(op1) * getnum(op2)\n    end,\n    __div = function(op1, op2)\n        return getnum(op1) / getnum(op2)\n    end,\n    __mod = function(op1, op2)\n        return getnum(op1) % getnum(op2)\n    end,\n    __pow = function(op1, op2)\n        return getnum(op1) ^ getnum(op2)\n    end,\n    __lt = function(op1, op2)\n        return getnum(op1) < getnum(op2)\n    end,\n    __eq = function(op1, op2)\n        return getnum(op1) == getnum(op2)\n    end,\n    __le = function(op1, op2)\n        return getnum(op1) <= getnum(op2)\n    end\n}\nisNumber.__index = isNumber\n\nfunction OBJDEF:asNumber(item)\n    if getmetatable(item) == isNumber then\n        -- it's already a JSON number object.\n        return item\n    elseif type(item) == 'table' and type(item.S) == 'string' and type(item.N) == 'number' then\n        -- it's a number-object table that lost its metatable, so give it one\n        return setmetatable(item, isNumber)\n    else\n        -- the normal situation... given a number or a string representation of a number....\n        local holder = {\n            S = tostring(item), -- S is the representation of the number as a string, which remains precise\n            N = tonumber(item) -- N is the number as a Lua number.\n        }\n        return setmetatable(holder, isNumber)\n    end\nend\n\n--\n-- Given an item that might be a normal string or number, or might be an 'isNumber' object defined above,\n-- return the string version. This shouldn't be needed often because the 'isNumber' object should autoconvert\n-- to a string in most cases, but it's here to allow it to be forced when needed.\n--\nfunction OBJDEF:forceString(item)\n    if type(item) == 'table' and type(item.S) == 'string' then\n        return item.S\n    else\n        return tostring(item)\n    end\nend\n\n--\n-- Given an item that might be a normal string or number, or might be an 'isNumber' object defined above,\n-- return the numeric version.\n--\nfunction OBJDEF:forceNumber(item)\n    if type(item) == 'table' and type(item.N) == 'number' then\n        return item.N\n    else\n        return tonumber(item)\n    end\nend\n\nlocal function unicode_codepoint_as_utf8(codepoint)\n    --\n    -- codepoint is a number\n    --\n    if codepoint <= 127 then\n        return string.char(codepoint)\n    elseif codepoint <= 2047 then\n        --\n        -- 110yyyxx 10xxxxxx         <-- useful notation from http://en.wikipedia.org/wiki/Utf8\n        --\n        local highpart = math.floor(codepoint / 0x40)\n        local lowpart = codepoint - (0x40 * highpart)\n        return string.char(0xC0 + highpart, 0x80 + lowpart)\n    elseif codepoint <= 65535 then\n        --\n        -- 1110yyyy 10yyyyxx 10xxxxxx\n        --\n        local highpart = math.floor(codepoint / 0x1000)\n        local remainder = codepoint - 0x1000 * highpart\n        local midpart = math.floor(remainder / 0x40)\n        local lowpart = remainder - 0x40 * midpart\n\n        highpart = 0xE0 + highpart\n        midpart = 0x80 + midpart\n        lowpart = 0x80 + lowpart\n\n        --\n        -- Check for an invalid character (thanks Andy R. at Adobe).\n        -- See table 3.7, page 93, in http://www.unicode.org/versions/Unicode5.2.0/ch03.pdf#G28070\n        --\n        if\n            (highpart == 0xE0 and midpart < 0xA0) or (highpart == 0xED and midpart > 0x9F) or\n                (highpart == 0xF0 and midpart < 0x90) or\n                (highpart == 0xF4 and midpart > 0x8F)\n         then\n            return '?'\n        else\n            return string.char(highpart, midpart, lowpart)\n        end\n    else\n        --\n        -- 11110zzz 10zzyyyy 10yyyyxx 10xxxxxx\n        --\n        local highpart = math.floor(codepoint / 0x40000)\n        local remainder = codepoint - 0x40000 * highpart\n        local midA = math.floor(remainder / 0x1000)\n        remainder = remainder - 0x1000 * midA\n        local midB = math.floor(remainder / 0x40)\n        local lowpart = remainder - 0x40 * midB\n\n        return string.char(0xF0 + highpart, 0x80 + midA, 0x80 + midB, 0x80 + lowpart)\n    end\nend\n\nfunction OBJDEF:onDecodeError(message, text, location, etc)\n    if text then\n        if location then\n            message = string.format('%s at byte %d of: %s', message, location, text)\n        else\n            message = string.format('%s: %s', message, text)\n        end\n    end\n\n    if etc ~= nil then\n        message = message .. ' (' .. OBJDEF:encode(etc) .. ')'\n    end\n\n    if self.assert then\n        self.assert(false, message)\n    else\n        assert(false, message)\n    end\nend\n\nfunction OBJDEF:onTrailingGarbage(json_text, location, parsed_value, etc)\n    --return self:onDecodeError(\"trailing garbage\", json_text, location, etc)\n    return parsed_value\nend\n\nOBJDEF.onDecodeOfNilError = OBJDEF.onDecodeError\nOBJDEF.onDecodeOfHTMLError = OBJDEF.onDecodeError\n\nfunction OBJDEF:onEncodeError(message, etc)\n    if etc ~= nil then\n        message = message .. ' (' .. OBJDEF:encode(etc) .. ')'\n    end\n\n    if self.assert then\n        self.assert(false, message)\n    else\n        assert(false, message)\n    end\nend\n\nlocal function grok_number(self, text, start, options)\n    --\n    -- Grab the integer part\n    --\n    local integer_part = text:match('^-?[1-9]%d*', start) or text:match('^-?0', start)\n\n    if not integer_part then\n        self:onDecodeError('expected number', text, start, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    local i = start + integer_part:len()\n\n    --\n    -- Grab an optional decimal part\n    --\n    local decimal_part = text:match('^%.%d+', i) or ''\n\n    i = i + decimal_part:len()\n\n    --\n    -- Grab an optional exponential part\n    --\n    local exponent_part = text:match('^[eE][-+]?%d+', i) or ''\n\n    i = i + exponent_part:len()\n\n    local full_number_text = integer_part .. decimal_part .. exponent_part\n\n    if options.decodeNumbersAsObjects then\n        return OBJDEF:asNumber(full_number_text), i\n    end\n\n    --\n    -- If we're told to stringify under certain conditions, so do.\n    -- We punt a bit when there's an exponent by just stringifying no matter what.\n    -- I suppose we should really look to see whether the exponent is actually big enough one\n    -- way or the other to trip stringification, but I'll be lazy about it until someone asks.\n    --\n    if\n        (options.decodeIntegerStringificationLength and\n            (integer_part:len() >= options.decodeIntegerStringificationLength or exponent_part:len() > 0)) or\n            (options.decodeDecimalStringificationLength and\n                (decimal_part:len() >= options.decodeDecimalStringificationLength or exponent_part:len() > 0))\n     then\n        return full_number_text, i -- this returns the exact string representation seen in the original JSON\n    end\n\n    local as_number = tonumber(full_number_text)\n\n    if not as_number then\n        self:onDecodeError('bad number', text, start, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    return as_number, i\nend\n\nlocal function grok_string(self, text, start, options)\n    if text:sub(start, start) ~= '\"' then\n        self:onDecodeError(\"expected string's opening quote\", text, start, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    local i = start + 1 -- +1 to bypass the initial quote\n    local text_len = text:len()\n    local VALUE = ''\n    while i <= text_len do\n        local c = text:sub(i, i)\n        if c == '\"' then\n            return VALUE, i + 1\n        end\n        if c ~= '\\\\' then\n            VALUE = VALUE .. c\n            i = i + 1\n        elseif text:match('^\\\\b', i) then\n            VALUE = VALUE .. '\\b'\n            i = i + 2\n        elseif text:match('^\\\\f', i) then\n            VALUE = VALUE .. '\\f'\n            i = i + 2\n        elseif text:match('^\\\\n', i) then\n            VALUE = VALUE .. '\\n'\n            i = i + 2\n        elseif text:match('^\\\\r', i) then\n            VALUE = VALUE .. '\\r'\n            i = i + 2\n        elseif text:match('^\\\\t', i) then\n            VALUE = VALUE .. '\\t'\n            i = i + 2\n        else\n            local hex =\n                text:match(\n                '^\\\\u([0123456789aAbBcCdDeEfF][0123456789aAbBcCdDeEfF][0123456789aAbBcCdDeEfF][0123456789aAbBcCdDeEfF])',\n                i\n            )\n            if hex then\n                i = i + 6 -- bypass what we just read\n\n                -- We have a Unicode codepoint. It could be standalone, or if in the proper range and\n                -- followed by another in a specific range, it'll be a two-code surrogate pair.\n                local codepoint = tonumber(hex, 16)\n                if codepoint >= 0xD800 and codepoint <= 0xDBFF then\n                    -- it's a hi surrogate... see whether we have a following low\n                    local lo_surrogate =\n                        text:match('^\\\\u([dD][cdefCDEF][0123456789aAbBcCdDeEfF][0123456789aAbBcCdDeEfF])', i)\n                    if lo_surrogate then\n                        i = i + 6 -- bypass the low surrogate we just read\n                        codepoint = 0x2400 + (codepoint - 0xD800) * 0x400 + tonumber(lo_surrogate, 16)\n                    else\n                        -- not a proper low, so we'll just leave the first codepoint as is and spit it out.\n                    end\n                end\n                VALUE = VALUE .. unicode_codepoint_as_utf8(codepoint)\n            else\n                -- just pass through what's escaped\n                VALUE = VALUE .. text:match('^\\\\(.)', i)\n                i = i + 2\n            end\n        end\n    end\n\n    self:onDecodeError('unclosed string', text, start, options.etc)\n    return nil, start -- in case the error method doesn't abort, return something sensible\nend\n\nlocal function skip_whitespace(text, start)\n    local _, match_end = text:find('^[ \\n\\r\\t]+', start) -- [http://www.ietf.org/rfc/rfc4627.txt] Section 2\n    if match_end then\n        return match_end + 1\n    else\n        return start\n    end\nend\n\nlocal grok_one  -- assigned later\n\nlocal function grok_object(self, text, start, options)\n    if text:sub(start, start) ~= '{' then\n        self:onDecodeError(\"expected '{'\", text, start, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    local i = skip_whitespace(text, start + 1) -- +1 to skip the '{'\n\n    local VALUE = self.strictTypes and self:newObject {} or {}\n\n    if text:sub(i, i) == '}' then\n        return VALUE, i + 1\n    end\n    local text_len = text:len()\n    while i <= text_len do\n        local key, new_i = grok_string(self, text, i, options)\n\n        i = skip_whitespace(text, new_i)\n\n        if text:sub(i, i) ~= ':' then\n            self:onDecodeError('expected colon', text, i, options.etc)\n            return nil, i -- in case the error method doesn't abort, return something sensible\n        end\n\n        i = skip_whitespace(text, i + 1)\n\n        local new_val, new_i = grok_one(self, text, i, options)\n\n        VALUE[key] = new_val\n\n        --\n        -- Expect now either '}' to end things, or a ',' to allow us to continue.\n        --\n        i = skip_whitespace(text, new_i)\n\n        local c = text:sub(i, i)\n\n        if c == '}' then\n            return VALUE, i + 1\n        end\n\n        if text:sub(i, i) ~= ',' then\n            self:onDecodeError(\"expected comma or '}'\", text, i, options.etc)\n            return nil, i -- in case the error method doesn't abort, return something sensible\n        end\n\n        i = skip_whitespace(text, i + 1)\n    end\n\n    self:onDecodeError(\"unclosed '{'\", text, start, options.etc)\n    return nil, start -- in case the error method doesn't abort, return something sensible\nend\n\nlocal function grok_array(self, text, start, options)\n    if text:sub(start, start) ~= '[' then\n        self:onDecodeError(\"expected '['\", text, start, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    local i = skip_whitespace(text, start + 1) -- +1 to skip the '['\n    local VALUE = self.strictTypes and self:newArray {} or {}\n    if text:sub(i, i) == ']' then\n        return VALUE, i + 1\n    end\n\n    local VALUE_INDEX = 1\n\n    local text_len = text:len()\n    while i <= text_len do\n        local val, new_i = grok_one(self, text, i, options)\n\n        -- can't table.insert(VALUE, val) here because it's a no-op if val is nil\n        VALUE[VALUE_INDEX] = val\n        VALUE_INDEX = VALUE_INDEX + 1\n\n        i = skip_whitespace(text, new_i)\n\n        --\n        -- Expect now either ']' to end things, or a ',' to allow us to continue.\n        --\n        local c = text:sub(i, i)\n        if c == ']' then\n            return VALUE, i + 1\n        end\n        if text:sub(i, i) ~= ',' then\n            self:onDecodeError(\"expected comma or ']'\", text, i, options.etc)\n            return nil, i -- in case the error method doesn't abort, return something sensible\n        end\n        i = skip_whitespace(text, i + 1)\n    end\n    self:onDecodeError(\"unclosed '['\", text, start, options.etc)\n    return nil, i -- in case the error method doesn't abort, return something sensible\nend\n\ngrok_one = function(self, text, start, options)\n    -- Skip any whitespace\n    start = skip_whitespace(text, start)\n\n    if start > text:len() then\n        self:onDecodeError('unexpected end of string', text, nil, options.etc)\n        return nil, start -- in case the error method doesn't abort, return something sensible\n    end\n\n    if text:find('^\"', start) then\n        return grok_string(self, text, start, options.etc)\n    elseif text:find('^[-0123456789 ]', start) then\n        return grok_number(self, text, start, options)\n    elseif text:find('^%{', start) then\n        return grok_object(self, text, start, options)\n    elseif text:find('^%[', start) then\n        return grok_array(self, text, start, options)\n    elseif text:find('^true', start) then\n        return true, start + 4\n    elseif text:find('^false', start) then\n        return false, start + 5\n    elseif text:find('^null', start) then\n        return nil, start + 4\n    else\n        self:onDecodeError(\"can't parse JSON\", text, start, options.etc)\n        return nil, 1 -- in case the error method doesn't abort, return something sensible\n    end\nend\n\nfunction OBJDEF:decode(text, etc, options)\n    --\n    -- If the user didn't pass in a table of decode options, make an empty one.\n    --\n    if type(options) ~= 'table' then\n        options = {}\n    end\n\n    --\n    -- If they passed in an 'etc' argument, stuff it into the options.\n    -- (If not, any 'etc' field in the options they passed in remains to be used)\n    --\n    if etc ~= nil then\n        options.etc = etc\n    end\n\n    if type(self) ~= 'table' or self.__index ~= OBJDEF then\n        local error_message = 'JSON:decode must be called in method format'\n        OBJDEF:onDecodeError(error_message, nil, nil, options.etc)\n        return nil, error_message -- in case the error method doesn't abort, return something sensible\n    end\n\n    if text == nil then\n        local error_message = 'nil passed to JSON:decode()'\n        self:onDecodeOfNilError(error_message, nil, nil, options.etc)\n        return nil, error_message -- in case the error method doesn't abort, return something sensible\n    elseif type(text) ~= 'string' then\n        local error_message = 'expected string argument to JSON:decode()'\n        self:onDecodeError(string.format('%s, got %s', error_message, type(text)), nil, nil, options.etc)\n        return nil, error_message -- in case the error method doesn't abort, return something sensible\n    end\n\n    if text:match('^%s*$') then\n        -- an empty string is nothing, but not an error\n        return nil\n    end\n\n    if text:match('^%s*<') then\n        -- Can't be JSON... we'll assume it's HTML\n        local error_message = 'HTML passed to JSON:decode()'\n        self:onDecodeOfHTMLError(error_message, text, nil, options.etc)\n        return nil, error_message -- in case the error method doesn't abort, return something sensible\n    end\n\n    --\n    -- Ensure that it's not UTF-32 or UTF-16.\n    -- Those are perfectly valid encodings for JSON (as per RFC 4627 section 3),\n    -- but this package can't handle them.\n    --\n    if text:sub(1, 1):byte() == 0 or (text:len() >= 2 and text:sub(2, 2):byte() == 0) then\n        local error_message = 'JSON package groks only UTF-8, sorry'\n        self:onDecodeError(error_message, text, nil, options.etc)\n        return nil, error_message -- in case the error method doesn't abort, return something sensible\n    end\n\n    --\n    -- apply global options\n    --\n    if options.decodeNumbersAsObjects == nil then\n        options.decodeNumbersAsObjects = self.decodeNumbersAsObjects\n    end\n    if options.decodeIntegerStringificationLength == nil then\n        options.decodeIntegerStringificationLength = self.decodeIntegerStringificationLength\n    end\n    if options.decodeDecimalStringificationLength == nil then\n        options.decodeDecimalStringificationLength = self.decodeDecimalStringificationLength\n    end\n\n    --\n    -- Finally, go parse it\n    --\n    local success, value, next_i = pcall(grok_one, self, text, 1, options)\n\n    if success then\n        local error_message = nil\n        if next_i ~= #text + 1 then\n            -- something's left over after we parsed the first thing.... whitespace is allowed.\n            next_i = skip_whitespace(text, next_i)\n\n            -- if we have something left over now, it's trailing garbage\n            if next_i ~= #text + 1 then\n                value, error_message = self:onTrailingGarbage(text, next_i, value, options.etc)\n            end\n        end\n        return value, error_message\n    else\n        -- If JSON:onDecodeError() didn't abort out of the pcall, we'll have received\n        -- the error message here as \"value\", so pass it along as an assert.\n        local error_message = value\n        if self.assert then\n            self.assert(false, error_message)\n        else\n            assert(false, error_message)\n        end\n        -- ...and if we're still here (because the assert didn't throw an error),\n        -- return a nil and throw the error message on as a second arg\n        return nil, error_message\n    end\nend\n\nlocal function backslash_replacement_function(c)\n    if c == '\\n' then\n        return '\\\\n'\n    elseif c == '\\r' then\n        return '\\\\r'\n    elseif c == '\\t' then\n        return '\\\\t'\n    elseif c == '\\b' then\n        return '\\\\b'\n    elseif c == '\\f' then\n        return '\\\\f'\n    elseif c == '\"' then\n        return '\\\\\"'\n    elseif c == '\\\\' then\n        return '\\\\\\\\'\n    else\n        return string.format('\\\\u%04x', c:byte())\n    end\nend\n\nlocal chars_to_be_escaped_in_JSON_string =\n    '[' ..\n    '\"' .. -- class sub-pattern to match a double quote\n        '%\\\\' .. -- class sub-pattern to match a backslash\n            '%z' .. -- class sub-pattern to match a null\n                '\\001' ..\n                    '-' ..\n                        '\\031' .. -- class sub-pattern to match control characters\n                            ']'\n\nlocal LINE_SEPARATOR_as_utf8 = unicode_codepoint_as_utf8(0x2028)\nlocal PARAGRAPH_SEPARATOR_as_utf8 = unicode_codepoint_as_utf8(0x2029)\nlocal function json_string_literal(value, options)\n    local newval = value:gsub(chars_to_be_escaped_in_JSON_string, backslash_replacement_function)\n    if options.stringsAreUtf8 then\n        --\n        -- This feels really ugly to just look into a string for the sequence of bytes that we know to be a particular utf8 character,\n        -- but utf8 was designed purposefully to make this kind of thing possible. Still, feels dirty.\n        -- I'd rather decode the byte stream into a character stream, but it's not technically needed so\n        -- not technically worth it.\n        --\n        newval = newval:gsub(LINE_SEPARATOR_as_utf8, '\\\\u2028'):gsub(PARAGRAPH_SEPARATOR_as_utf8, '\\\\u2029')\n    end\n    return '\"' .. newval .. '\"'\nend\n\nlocal function object_or_array(self, T, etc)\n    --\n    -- We need to inspect all the keys... if there are any strings, we'll convert to a JSON\n    -- object. If there are only numbers, it's a JSON array.\n    --\n    -- If we'll be converting to a JSON object, we'll want to sort the keys so that the\n    -- end result is deterministic.\n    --\n    local string_keys = {}\n    local number_keys = {}\n    local number_keys_must_be_strings = false\n    local maximum_number_key\n\n    for key in pairs(T) do\n        if type(key) == 'string' then\n            table.insert(string_keys, key)\n        elseif type(key) == 'number' then\n            table.insert(number_keys, key)\n            if key <= 0 or key >= math.huge then\n                number_keys_must_be_strings = true\n            elseif not maximum_number_key or key > maximum_number_key then\n                maximum_number_key = key\n            end\n        else\n            self:onEncodeError(\"can't encode table with a key of type \" .. type(key), etc)\n        end\n    end\n\n    if #string_keys == 0 and not number_keys_must_be_strings then\n        --\n        -- An empty table, or a numeric-only array\n        --\n        if #number_keys > 0 then\n            return nil, maximum_number_key -- an array\n        elseif tostring(T) == 'JSON array' then\n            return nil\n        elseif tostring(T) == 'JSON object' then\n            return {}\n        else\n            -- have to guess, so we'll pick array, since empty arrays are likely more common than empty objects\n            return nil\n        end\n    end\n\n    table.sort(string_keys)\n\n    local map\n    if #number_keys > 0 then\n        --\n        -- If we're here then we have either mixed string/number keys, or numbers inappropriate for a JSON array\n        -- It's not ideal, but we'll turn the numbers into strings so that we can at least create a JSON object.\n        --\n\n        if self.noKeyConversion then\n            self:onEncodeError('a table with both numeric and string keys could be an object or array; aborting', etc)\n        end\n\n        --\n        -- Have to make a shallow copy of the source table so we can remap the numeric keys to be strings\n        --\n        map = {}\n        for key, val in pairs(T) do\n            map[key] = val\n        end\n\n        table.sort(number_keys)\n\n        --\n        -- Throw numeric keys in there as strings\n        --\n        for _, number_key in ipairs(number_keys) do\n            local string_key = tostring(number_key)\n            if map[string_key] == nil then\n                table.insert(string_keys, string_key)\n                map[string_key] = T[number_key]\n            else\n                self:onEncodeError(\n                    'conflict converting table with mixed-type keys into a JSON object: key ' ..\n                        number_key .. ' exists both as a string and a number.',\n                    etc\n                )\n            end\n        end\n    end\n\n    return string_keys, nil, map\nend\n\n--\n-- Encode\n--\n-- 'options' is nil, or a table with possible keys:\n--\n--    pretty         -- If true, return a pretty-printed version.\n--\n--    indent         -- A string (usually of spaces) used to indent each nested level.\n--\n--    align_keys     -- If true, align all the keys when formatting a table.\n--\n--    null           -- If this exists with a string value, table elements with this value are output as JSON null.\n--\n--    stringsAreUtf8 -- If true, consider Lua strings not as a sequence of bytes, but as a sequence of UTF-8 characters.\n--                      (Currently, the only practical effect of setting this option is that Unicode LINE and PARAGRAPH\n--                       separators, if found in a string, are encoded with a JSON escape instead of as raw UTF-8.\n--                       The JSON is valid either way, but encoding this way, apparently, allows the resulting JSON\n--                       to also be valid Java.)\n--\n--\nlocal encode_value  -- must predeclare because it calls itself\nfunction encode_value(self, value, parents, etc, options, indent, for_key)\n    --\n    -- keys in a JSON object can never be null, so we don't even consider options.null when converting a key value\n    --\n    if value == nil or (not for_key and options and options.null and value == options.null) then\n        return 'null'\n    elseif type(value) == 'string' then\n        return json_string_literal(value, options)\n    elseif type(value) == 'number' then\n        if value ~= value then\n            --\n            -- NaN (Not a Number).\n            -- JSON has no NaN, so we have to fudge the best we can. This should really be a package option.\n            --\n            return 'null'\n        elseif value >= math.huge then\n            --\n            -- Positive infinity. JSON has no INF, so we have to fudge the best we can. This should\n            -- really be a package option. Note: at least with some implementations, positive infinity\n            -- is both \">= math.huge\" and \"<= -math.huge\", which makes no sense but that's how it is.\n            -- Negative infinity is properly \"<= -math.huge\". So, we must be sure to check the \">=\"\n            -- case first.\n            --\n            return '1e+9999'\n        elseif value <= -math.huge then\n            --\n            -- Negative infinity.\n            -- JSON has no INF, so we have to fudge the best we can. This should really be a package option.\n            --\n            return '-1e+9999'\n        else\n            return tostring(value)\n        end\n    elseif type(value) == 'boolean' then\n        return tostring(value)\n    elseif type(value) ~= 'table' then\n        self:onEncodeError(\"can't convert \" .. type(value) .. ' to JSON', etc)\n    elseif getmetatable(value) == isNumber then\n        return tostring(value)\n    else\n        --\n        -- A table to be converted to either a JSON object or array.\n        --\n        local T = value\n\n        if type(options) ~= 'table' then\n            options = {}\n        end\n        if type(indent) ~= 'string' then\n            indent = ''\n        end\n\n        if parents[T] then\n            self:onEncodeError('table ' .. tostring(T) .. ' is a child of itself', etc)\n        else\n            parents[T] = true\n        end\n\n        local result_value\n\n        local object_keys, maximum_number_key, map = object_or_array(self, T, etc)\n        if maximum_number_key then\n            --\n            -- An array...\n            --\n            local ITEMS = {}\n            local key_indent = indent .. tostring(options.indent or '')\n            for i = 1, maximum_number_key do\n                if not options.array_newline then\n                    table.insert(ITEMS, encode_value(self, T[i], parents, etc, options, indent))\n                else\n                    table.insert(ITEMS, encode_value(self, T[i], parents, etc, options, key_indent))\n                end\n            end\n\n            if options.pretty then\n                if not options.array_newline then\n                    result_value = '[ ' .. table.concat(ITEMS, ', ') .. ' ]'\n                else\n                    result_value =\n                        '[\\n' .. key_indent .. table.concat(ITEMS, ',\\n' .. key_indent) .. '\\n' .. indent .. ']'\n                end\n            else\n                result_value = '[' .. table.concat(ITEMS, ',') .. ']'\n            end\n        elseif object_keys then\n            --\n            -- An object\n            --\n            local TT = map or T\n\n            if options.pretty then\n                local KEYS = {}\n                local max_key_length = 0\n                for _, key in ipairs(object_keys) do\n                    local encoded = encode_value(self, tostring(key), parents, etc, options, indent, true)\n                    if options.align_keys then\n                        max_key_length = math.max(max_key_length, #encoded)\n                    end\n                    table.insert(KEYS, encoded)\n                end\n                local key_indent = indent .. tostring(options.indent or '')\n                local subtable_indent =\n                    key_indent .. string.rep(' ', max_key_length) .. (options.align_keys and '  ' or '')\n                local FORMAT = '%s%' .. string.format('%d', max_key_length) .. 's: %s'\n\n                local COMBINED_PARTS = {}\n                for i, key in ipairs(object_keys) do\n                    local encoded_val = encode_value(self, TT[key], parents, etc, options, subtable_indent)\n                    table.insert(COMBINED_PARTS, string.format(FORMAT, key_indent, KEYS[i], encoded_val))\n                end\n                result_value = '{\\n' .. table.concat(COMBINED_PARTS, ',\\n') .. '\\n' .. indent .. '}'\n            else\n                local PARTS = {}\n                for _, key in ipairs(object_keys) do\n                    local encoded_val = encode_value(self, TT[key], parents, etc, options, indent)\n                    local encoded_key = encode_value(self, tostring(key), parents, etc, options, indent, true)\n                    table.insert(PARTS, string.format('%s:%s', encoded_key, encoded_val))\n                end\n                result_value = '{' .. table.concat(PARTS, ',') .. '}'\n            end\n        else\n            --\n            -- An empty array/object... we'll treat it as an array, though it should really be an option\n            --\n            result_value = '[]'\n        end\n\n        parents[T] = false\n        return result_value\n    end\nend\n\nlocal function top_level_encode(self, value, etc, options)\n    local val = encode_value(self, value, {}, etc, options)\n    if val == nil then\n        --PRIVATE(\"may need to revert to the previous public verison if I can't figure out what the guy wanted\")\n        return val\n    else\n        return val\n    end\nend\n\nfunction OBJDEF:encode(value, etc, options)\n    if type(self) ~= 'table' or self.__index ~= OBJDEF then\n        OBJDEF:onEncodeError('JSON:encode must be called in method format', etc)\n    end\n\n    --\n    -- If the user didn't pass in a table of decode options, make an empty one.\n    --\n    if type(options) ~= 'table' then\n        options = {}\n    end\n\n    return top_level_encode(self, value, etc, options)\nend\n\nfunction OBJDEF:encode_pretty(value, etc, options)\n    if type(self) ~= 'table' or self.__index ~= OBJDEF then\n        OBJDEF:onEncodeError('JSON:encode_pretty must be called in method format', etc)\n    end\n\n    --\n    -- If the user didn't pass in a table of decode options, use the default pretty ones\n    --\n    if type(options) ~= 'table' then\n        options = default_pretty_options\n    end\n\n    return top_level_encode(self, value, etc, options)\nend\n\nfunction OBJDEF.__tostring()\n    return 'JSON encode/decode package'\nend\n\nOBJDEF.__index = OBJDEF\n\nfunction OBJDEF:new(args)\n    local new = {}\n\n    if args then\n        for key, val in pairs(args) do\n            new[key] = val\n        end\n    end\n\n    return setmetatable(new, OBJDEF)\nend\n\nreturn OBJDEF:new()\n\n--\n-- Version history:\n--\n--   20161109.21   Oops, had a small boo-boo in the previous update.\n--\n--   20161103.20   Used to silently ignore trailing garbage when decoding. Now fails via JSON:onTrailingGarbage()\n--                 http://seriot.ch/parsing_json.php\n--\n--                 Built-in error message about \"expected comma or ']'\" had mistakenly referred to '['\n--\n--                 Updated the built-in error reporting to refer to bytes rather than characters.\n--\n--                 The decode() method no longer assumes that error handlers abort.\n--\n--                 Made the VERSION string a string instead of a number\n--\n\n--   20160916.19   Fixed the isNumber.__index assignment (thanks to Jack Taylor)\n--\n--   20160730.18   Added JSON:forceString() and JSON:forceNumber()\n--\n--   20160728.17   Added concatenation to the metatable for JSON:asNumber()\n--\n--   20160709.16   Could crash if not passed an options table (thanks jarno heikkinen <jarnoh@capturemonkey.com>).\n--\n--                 Made JSON:asNumber() a bit more resilient to being passed the results of itself.\n--\n--   20160526.15   Added the ability to easily encode null values in JSON, via the new \"null\" encoding option.\n--                 (Thanks to Adam B for bringing up the issue.)\n--\n--                 Added some support for very large numbers and precise floats via\n--                    JSON.decodeNumbersAsObjects\n--                    JSON.decodeIntegerStringificationLength\n--                    JSON.decodeDecimalStringificationLength\n--\n--                 Added the \"stringsAreUtf8\" encoding option. (Hat tip to http://lua-users.org/wiki/JsonModules )\n--\n--   20141223.14   The encode_pretty() routine produced fine results for small datasets, but isn't really\n--                 appropriate for anything large, so with help from Alex Aulbach I've made the encode routines\n--                 more flexible, and changed the default encode_pretty() to be more generally useful.\n--\n--                 Added a third 'options' argument to the encode() and encode_pretty() routines, to control\n--                 how the encoding takes place.\n--\n--                 Updated docs to add assert() call to the loadfile() line, just as good practice so that\n--                 if there is a problem loading JSON.lua, the appropriate error message will percolate up.\n--\n--   20140920.13   Put back (in a way that doesn't cause warnings about unused variables) the author string,\n--                 so that the source of the package, and its version number, are visible in compiled copies.\n--\n--   20140911.12   Minor lua cleanup.\n--                 Fixed internal reference to 'JSON.noKeyConversion' to reference 'self' instead of 'JSON'.\n--                 (Thanks to SmugMug's David Parry for these.)\n--\n--   20140418.11   JSON nulls embedded within an array were being ignored, such that\n--                     [\"1\",null,null,null,null,null,\"seven\"],\n--                 would return\n--                     {1,\"seven\"}\n--                 It's now fixed to properly return\n--                     {1, nil, nil, nil, nil, nil, \"seven\"}\n--                 Thanks to \"haddock\" for catching the error.\n--\n--   20140116.10   The user's JSON.assert() wasn't always being used. Thanks to \"blue\" for the heads up.\n--\n--   20131118.9    Update for Lua 5.3... it seems that tostring(2/1) produces \"2.0\" instead of \"2\",\n--                 and this caused some problems.\n--\n--   20131031.8    Unified the code for encode() and encode_pretty(); they had been stupidly separate,\n--                 and had of course diverged (encode_pretty didn't get the fixes that encode got, so\n--                 sometimes produced incorrect results; thanks to Mattie for the heads up).\n--\n--                 Handle encoding tables with non-positive numeric keys (unlikely, but possible).\n--\n--                 If a table has both numeric and string keys, or its numeric keys are inappropriate\n--                 (such as being non-positive or infinite), the numeric keys are turned into\n--                 string keys appropriate for a JSON object. So, as before,\n--                         JSON:encode({ \"one\", \"two\", \"three\" })\n--                 produces the array\n--                         [\"one\",\"two\",\"three\"]\n--                 but now something with mixed key types like\n--                         JSON:encode({ \"one\", \"two\", \"three\", SOMESTRING = \"some string\" }))\n--                 instead of throwing an error produces an object:\n--                         {\"1\":\"one\",\"2\":\"two\",\"3\":\"three\",\"SOMESTRING\":\"some string\"}\n--\n--                 To maintain the prior throw-an-error semantics, set\n--                      JSON.noKeyConversion = true\n--\n--   20131004.7    Release under a Creative Commons CC-BY license, which I should have done from day one, sorry.\n--\n--   20130120.6    Comment update: added a link to the specific page on my blog where this code can\n--                 be found, so that folks who come across the code outside of my blog can find updates\n--                 more easily.\n--\n--   20111207.5    Added support for the 'etc' arguments, for better error reporting.\n--\n--   20110731.4    More feedback from David Kolf on how to make the tests for Nan/Infinity system independent.\n--\n--   20110730.3    Incorporated feedback from David Kolf at http://lua-users.org/wiki/JsonModules:\n--\n--                   * When encoding lua for JSON, Sparse numeric arrays are now handled by\n--                     spitting out full arrays, such that\n--                        JSON:encode({\"one\", \"two\", [10] = \"ten\"})\n--                     returns\n--                        [\"one\",\"two\",null,null,null,null,null,null,null,\"ten\"]\n--\n--                     In 20100810.2 and earlier, only up to the first non-null value would have been retained.\n--\n--                   * When encoding lua for JSON, numeric value NaN gets spit out as null, and infinity as \"1+e9999\".\n--                     Version 20100810.2 and earlier created invalid JSON in both cases.\n--\n--                   * Unicode surrogate pairs are now detected when decoding JSON.\n--\n--   20100810.2    added some checking to ensure that an invalid Unicode character couldn't leak in to the UTF-8 encoding\n--\n--   20100731.1    initial public release\n--\n","m_scriptType":"kModuleScript"}}]},{"class":"cModuleScriptObject","name":"B3Module","guid":[2550788250,2045660374,2765953421,1021477390],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"B3Module"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"B3 = {\n    VERSION = '0.2.0',\n    --Returning status\n    SUCCESS = 1,\n    FAILURE = 2,\n    RUNNING = 3,\n    ERROR = 4,\n    --Node categories\n    COMPOSITE = 'composite',\n    DECORATOR = 'decorator',\n    ACTION = 'action',\n    CONDITION = 'condition',\n    createUUID = function()\n        local seed = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'}\n        local tb = {}\n        for i = 1, 32 do\n            table.insert(tb, seed[math.random(1, 16)])\n        end\n        return table.concat(tb)\n    end,\n    Class = function(classname, super)\n        local superType = type(super)\n        local cls\n\n        --如果父类既不是函数也不是table则说明父类为空\n        if superType ~= 'function' and superType ~= 'table' then\n            superType = nil\n            super = nil\n        end\n\n        --如果父类的类型是函数或者是C对象\n        if superType == 'function' or (super and super.__ctype == 1) then\n            -- inherited from native C++ Object\n            cls = {}\n\n            --如果父类是表则复制成员并且设置这个类的继承信息\n            --如果是函数类型则设置构造方法并且设置ctor函数\n            if superType == 'table' then\n                -- copy fields from super\n                for k, v in pairs(super) do\n                    cls[k] = v\n                end\n                cls.__create = super.__create\n                cls.super = super\n            else\n                cls.__create = super\n                cls.ctor = function()\n                end\n            end\n\n            --设置类型的名称\n            cls.__cname = classname\n            cls.__ctype = 1\n\n            --定义该类型的创建实例的函数为基类的构造函数后复制到子类实例\n            --并且调用子数的ctor方法\n            function cls.new(...)\n                local instance = cls.__create(...)\n                -- copy fields from class to native object\n                for k, v in pairs(cls) do\n                    instance[k] = v\n                end\n                instance.class = cls\n                instance:ctor(...)\n                return instance\n            end\n        else\n            --如果是继承自普通的lua表,则设置一下原型，并且构造实例后也会调用ctor方法\n            -- inherited from Lua Object\n            if super then\n                cls = {}\n                setmetatable(cls, {__index = super})\n                cls.super = super\n            else\n                cls = {\n                    ctor = function()\n                    end\n                }\n            end\n\n            cls.__cname = classname\n            cls.__ctype = 2 -- lua\n            cls.__index = cls\n\n            function cls.new(...)\n                local instance = setmetatable({}, cls)\n                instance.class = cls\n                instance:ctor(...)\n                return instance\n            end\n        end\n\n        return cls\n    end,\n    decodeJson = function(str)\n        return JSON:decode(str)\n    end\n}\n\n----------------Tick--------------------------\nlocal tick = B3.Class('Tick')\nB3.Tick = tick\n\nfunction tick:ctor()\n    self.tree = nil\n    self.debug = nil\n    self.target = nil\n    self.blackboard = nil\n\n    self._openNodes = {}\n    self._nodeCount = 0\nend\n\nfunction tick:_enterNode(node)\n    self._nodeCount = self._nodeCount + 1\n    table.insert(self._openNodes, node)\nend\n\nfunction tick:_openNode(node)\nend\n\nfunction tick:_tickNode(node)\nend\n\nfunction tick:_closeNode(node)\nend\n\nfunction tick:_exitNode(node)\nend\n\n----------------BaseNode----------------------\nlocal baseNode = B3.Class('BaseNode')\nB3.BaseNode = baseNode\n\nfunction baseNode:ctor(params)\n    self.id = B3.createUUID()\n    self.name = ''\n    self.title = self.title or self.name\n    self.description = ''\n    self.parameters = {}\n    self.properties = {}\nend\n\nfunction baseNode:_execute(tick)\n    --ENTER\n    self:_enter(tick)\n\n    --OPEN\n    if not (tick.blackboard:get('isOpen', tick.tree.id, self.id)) then\n        self:_open(tick)\n    end\n\n    --TICK\n    local status = self:_tick(tick)\n\n    --CLOSE\n    if status ~= B3.RUNNING then\n        self:_close(tick)\n    end\n\n    --EXIT\n    self:_exit(tick)\n\n    return status\nend\n\nfunction baseNode:_enter(tick)\n    tick:_enterNode(self)\n    self:enter(tick)\nend\n\nfunction baseNode:_open(tick)\n    tick:_openNode(self)\n    tick.blackboard:set('isOpen', true, tick.tree.id, self.id)\n    self:open(tick)\nend\n\nfunction baseNode:_tick(tick)\n    tick:_tickNode(self)\n    return self:tick(tick)\nend\n\nfunction baseNode:_close(tick)\n    tick:_closeNode(self)\n    tick.blackboard:set('isOpen', false, tick.tree.id, self.id)\n    self:close(tick)\nend\n\nfunction baseNode:_exit(tick)\n    tick:_exitNode(self)\n    self:exit(tick)\nend\n\nfunction baseNode:enter(tick)\nend\n\nfunction baseNode:open(tick)\nend\n\nfunction baseNode:tick(tick)\nend\n\nfunction baseNode:close(tick)\nend\n\nfunction baseNode:exit(tick)\nend\n\n------------------Blackboard------------------------\nlocal blackboard = B3.Class('Blackboard')\nB3.Blackboard = blackboard\n\nfunction blackboard:ctor()\n    self._baseMemory = {}\n    self._treeMemory = {}\nend\n\nfunction blackboard:_getTreeMemory(treeScope)\n    if not self._treeMemory[treeScope] then\n        self._treeMemory[treeScope] = {nodeMemory = {}, openNodes = {}, traversalDepth = 0, traversalCycle = 0}\n    end\n    return self._treeMemory[treeScope]\nend\n\nfunction blackboard:_getNodeMemory(treeMemory, nodeScope)\n    local memory = treeMemory.nodeMemory\n\n    if not memory then\n        memory = {}\n    end\n\n    if memory and not memory[nodeScope] then\n        memory[nodeScope] = {}\n    end\n\n    return memory[nodeScope]\nend\n\nfunction blackboard:_getMemory(treeScope, nodeScope)\n    local memory = self._baseMemory\n\n    if treeScope then\n        memory = self:_getTreeMemory(treeScope)\n\n        if nodeScope then\n            memory = self:_getNodeMemory(memory, nodeScope)\n        end\n    end\n\n    return memory\nend\n\nfunction blackboard:set(key, value, treeScope, nodeScope)\n    local memory = self:_getMemory(treeScope, nodeScope)\n    memory[key] = value\nend\n\nfunction blackboard:get(key, treeScope, nodeScope)\n    local memory = self:_getMemory(treeScope, nodeScope)\n    if memory then\n        return memory[key]\n    end\n    return {}\nend\n\n------------BehaviorTree-----------------------------\nlocal behaviorTree = B3.Class('BehaviorTree')\nB3.BehaviorTree = behaviorTree\n\nfunction behaviorTree:ctor()\n    self.id = B3.createUUID()\n    self.title = 'The behavior tree'\n    self.description = 'Default description'\n    self.properties = {}\n    self.root = nil\n    self.debug = nil\nend\n\nfunction behaviorTree:load(jsonData, names)\n    names = names or {}\n    local data = JSON:decode(jsonData)\n\n    self.title = data.title or self.title\n    self.description = data.description or self.description\n    self.properties = data.properties or self.properties\n    --print(table.dump(data))\n    print(self.title)\n    --print(self.description)\n    print(table.dump(data.nodes))\n\n    local nodes = {}\n    local id, spec, node\n\n    for i, v in pairs(data.nodes) do\n        id = i\n        spec = v\n        local Cls\n\n        if names[spec.name] then\n            Cls = names[spec.name]\n        elseif B3[spec.name] then\n            Cls = B3[spec.name]\n        else\n            print('Error : BehaviorTree.load : Invalid node name + ' .. spec.name .. '.')\n        end\n        --node = Cls.new(spec.properties)\n        node = Cls.new()\n        node.id = spec.id or node.id\n        node.title = spec.title or node.title\n        node.description = spec.description or node.description\n        node.properties = spec.properties or node.proerties\n        nodes[id] = node\n    end\n\n    for i, v in pairs(data.nodes) do\n        id = i\n        spec = v\n        node = nodes[id]\n        --print(i,v)\n        if v.child then\n            node.child = nodes[v.child]\n        end\n\n        if v.children then\n            for i = 1, #v.children do\n                local cid = spec.children[i]\n                --print(\"{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{{\")\n                --print(spec.children[i],nodes[cid])\n                table.insert(node.children, nodes[cid])\n            end\n        end\n    end\n\n    self.root = nodes[data.root]\n    print(self.root.name)\nend\n\nfunction behaviorTree:dump()\n    local data = {}\n    local customNames = {}\n\n    data.title = self.title\n    data.description = self.description\n    if self.root then\n        data.root = self.root.id\n    else\n        data.root = nil\n    end\n    data.properties = self.properties\n    data.nodes = {}\n    data.custom_nodes = {}\n\n    if self.root then\n        return data\n    end\n\n    --TODO:\nend\n\nfunction behaviorTree:tick(target, blackboard)\n    if not blackboard then\n        print('The blackboard parameter is obligatory and must be an instance of B3.Blackboard')\n    end\n\n    local tick = B3.Tick.new()\n    tick.debug = self.debug\n    tick.target = target\n    tick.blackboard = blackboard\n    tick.tree = self\n\n    --TICK NODE\n    local state = self.root:_execute(tick)\n\n    --CLOSE NODES FROM LAST TICK, IF NEEDED\n    local lastOpenNodes = blackboard:get('openNodes', self.id)\n    local currOpenNodes = tick._openNodes[0]\n    if not lastOpenNodes then\n        lastOpenNodes = {}\n    end\n\n    if not currOpenNodes then\n        currOpenNodes = {}\n    end\n\n    local start = 0\n    local i\n    for i = 0, math.min(#lastOpenNodes, #currOpenNodes) do\n        start = i + 1\n        if lastOpenNodes[i] ~= currOpenNodes[i] then\n            break\n        end\n    end\n\n    for i = #lastOpenNodes, 0, -1 do\n        if lastOpenNodes[i] then\n            lastOpenNodes[i]:_close(tick)\n        end\n    end\n\n    blackboard:set('openNodes', currOpenNodes, self.id)\n    blackboard:set('nodeCount', tick._nodeCount, self.id)\nend\n\nreturn B3\n","m_scriptType":"kModuleScript"}}]},{"class":"cScriptObject","name":"ActionNodes","guid":[618467548,2152156948,2838888746,2796001249],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"ActionNodes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"-------------Action---------------------\nlocal action = B3.Class('Action', B3.BaseNode)\nB3.Action = action\n\nfunction action:ctor()\n    B3.BaseNode.ctor(self)\n\n    self.category = B3.ACTION\nend\n\n--Action=========Runner==========\nlocal runner = B3.Class('Runner', B3.Action)\nB3.Runner = runner\n\nfunction runner:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Runner'\nend\n\nfunction runner:tick(tick)\n    --print(self.title)\n    --print(table.dump(self.properties))\n    return B3.RUNNING\nend\n\n--Action========Error======\nlocal error = B3.Class('Error', B3.Action)\nB3.Error = error\n\nfunction error:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Error'\nend\n\nfunction error:tick()\n    return B3.ERROR\nend\n\n--Action========Failer======\nlocal failer = B3.Class('Failer', B3.Action)\nB3.Failer = failer\n\nfunction failer:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Failer'\nend\n\nfunction failer:tick()\n    return B3.FAILURE\nend\n\n--action=======Succeeder=====\nlocal succeeder = B3.Class('Succeeder', B3.Action)\nB3.Succeeder = succeeder\n\nfunction succeeder:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Succeeder'\nend\n\nfunction succeeder:tick(tick)\n    return B3.SUCCESS\nend\n\n--action=======Wait=====\nlocal mwait = B3.Class('Wait', B3.Action)\nB3.Wait = mwait\n\nfunction mwait:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Wait'\nend\n\nfunction mwait:open(tick)\n    local startTime = Timer.GetTimeMillisecond()\n    self.endTime = self.properties.milliseconds\n    tick.blackboard:set('startTime', startTime, tick.tree.id, self.id)\nend\n\nfunction mwait:tick(tick)\n    local currTime = Timer.GetTimeMillisecond()\n    local startTime = tick.blackboard:get('startTime', tick.tree.id, self.id)\n\n    if not startTime or startTime == 0 then\n        startTime = currTime\n        tick.blackboard:set('startTime', currTime, tick.tree.id, self.id)\n    end\n\n    --print(self.endTime)\n    if currTime - startTime > self.endTime then\n        return B3.SUCCESS\n    end\n\n    return B3.RUNNING\nend\n"}}]},{"class":"cScriptObject","name":"CompositeNodes","guid":[4163892949,29640173,2790133346,2162277355],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"CompositeNodes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"--------------------Composite---------------------\nlocal composite = B3.Class('Composite', B3.BaseNode)\nB3.Composite = composite\n\nfunction composite:ctor(params)\n    self.children = (params and params.children) or {}\nend\n\n--Composite==========Sequence=================\nlocal sequence = B3.Class('Sequence', B3.Composite)\nB3.Sequence = sequence\n\nfunction sequence:ctor()\n    B3.Composite.ctor(self)\n\n    self.name = 'Sequence'\nend\n\nfunction sequence:tick(tick)\n    for i = 1, #self.children do\n        local v = self.children[i]\n        local status = v:_execute(tick)\n        --------print(i,v)\n        if status ~= B3.SUCCESS then\n            return status\n        end\n    end\n    return B3.SUCCESS\nend\n\n--Composite==========MemSequence=================\nlocal memSequence = B3.Class('MemSequence', B3.Composite)\nB3.MemSequence = memSequence\n\nfunction memSequence:ctor()\n    B3.Composite.ctor(self)\n\n    self.name = 'MemSequence'\nend\n\nfunction memSequence:open(tick)\n    tick.blackboard:set('runningChild', 1, tick.tree.id, self.id)\nend\n\nfunction memSequence:tick(tick)\n    local child = tick.blackboard:get('runningChild', tick.tree.id, self.id)\n    for i = child, #self.children do\n        local v = self.children[i]\n        local status = v:_execute(tick)\n\n        if status ~= B3.SUCCESS then\n            if status == B3.RUNNING then\n                tick.blackboard:set('runningChild', i, tick.tree.id, self.id)\n            end\n\n            return status\n        end\n    end\n\n    return B3.SUCCESS\nend\n\n--Composite==========Priority=================\nlocal priority = B3.Class('Priority', B3.Composite)\nB3.Priority = priority\n\nfunction priority:ctor()\n    B3.Composite.ctor(self)\n\n    self.name = 'Priority'\nend\n\nfunction priority:tick(tick)\n    for i, v in pairs(self.children) do\n        local status = v:_execute(tick)\n\n        if status ~= B3.FAILURE then\n            return status\n        end\n    end\n\n    return B3.FAILURE\nend\n\n--Composite==========MemPriority=================\nlocal memPriority = B3.Class('MemPriority', B3.Composite)\nB3.MemPriority = memPriority\n\nfunction memPriority:ctor()\n    B3.Composite.ctor(self)\n\n    self.name = 'MemPriority'\nend\n\nfunction memPriority:open(tick)\n    tick.blackboard:set('runningChild', 1, tick.tree.id, self.id)\nend\n\nfunction memPriority:tick(tick)\n    local child = tick.blackboard:get('runningChild', tick.tree.id, self.id)\n    for i = child, #self.children do\n        local v = self.children[i]\n        local status = v:_execute(tick)\n\n        if status ~= B3.FAILURE then\n            if status == B3.RUNNING then\n                tick.blackboard:set('runningChild', i, tick.tree.id, self.id)\n            end\n\n            return status\n        end\n    end\n\n    return B3.FAILURE\nend\n"}}]},{"class":"cScriptObject","name":"ConditionNodes","guid":[787510608,2188921297,2191343987,2592851435],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"ConditionNodes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"----------------------Condition-------------------\nlocal condition = B3.Class('Condition', B3.BaseNode)\nB3.Condition = condition\n\nfunction condition:ctor(params)\n    B3.BaseNode.ctor(self, params)\nend\n"}}]},{"class":"cScriptObject","name":"DecoratorNodes","guid":[486026994,3836431686,2598097675,3960547084],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"DecoratorNodes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"------------------Decorator----------------------\nlocal decorator = B3.Class('Decorator', B3.BaseNode)\nB3.Decorator = decorator\n\nfunction decorator:ctor(params)\n    B3.BaseNode.ctor(self, params)\n\n    if not params then\n        params = {}\n    end\n\n    self.child = params.child or nil\nend\n\n---------Repeater\nlocal repeater = B3.Class('Repeater', B3.Decorator)\nB3.Repeater = repeater\n\nfunction repeater:ctor(params)\n    B3.Decorator.ctor(self)\n\n    if not params then\n        params = {}\n    end\n\n    self.name = 'Repeater'\n    self.title = 'Repeater <maxLoop>x'\n    self.parameters = {maxLoop = -1}\n\n    self.maxLoop = params.maxLoop or -1\nend\n\nfunction repeater:open(tick)\n    tick.blackboard:set('i', 0, tick.tree.id, self.id)\n    --print(table.dump(self.properties.maxLoop))\n    self.maxLoop = self.properties.maxLoop\nend\n\nfunction repeater:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local i = tick.blackboard:get('i', tick.tree.id, self.id)\n    local status = B3.SUCCESS\n\n    while (self.maxLoop < 0 or i < self.maxLoop) do\n        --print(i)\n        local status = self.child:_execute(tick)\n        if status == B3.SUCCESS or status == B3.FAILURE then\n            i = i + 1\n            wait()\n        else\n            break\n        end\n    end\n\n    tick.blackboard:set('i', i, tick.tree.id, self.id)\n    return status\nend\n\n---------------RepeatUntilSuccess\nlocal repeatUntilSuccess = B3.Class('RepeatUntilSuccess', B3.Decorator)\nB3.RepeatUntilSuccess = repeatUntilSuccess\n\nfunction repeatUntilSuccess:ctor(params)\n    B3.Decorator.ctor(self)\n\n    if not params then\n        params = {}\n    end\n\n    self.name = 'RepeatUntilSuccess'\n    self.title = 'Repeat Until Success'\n    self.parameters = {maxLoop = -1}\n\n    self.maxLoop = params.maxLoop or -1\nend\n\nfunction repeatUntilSuccess:open(tick)\n    tick.blackboard.set('i', 0, tick.tree.id, self.id)\n    self.maxLoop = self.properties.maxLoop\nend\n\nfunction repeatUntilSuccess:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local i = tick.blackboard.get('i', tick.tree.id, self.id)\n    local status = B3.ERROR\n\n    while (self.maxLoop < 0 or i < self.maxLoop) do\n        local status = self.child:_execute(tick)\n\n        if status == B3.FAILURE then\n            i = i + 1\n        else\n            break\n        end\n    end\n\n    i = tick.blackboard.set('i', i, tick.tree.id, self.id)\n    return status\nend\n\n------------------RepeatUntilFailure\nlocal repeatUntilFailure = B3.Class('RepeatUntilFailure', B3.Decorator)\nB3.RepeatUntilFailure = repeatUntilFailure\n\nfunction repeatUntilFailure:ctor(params)\n    B3.Decorator.ctor(self)\n\n    if not params then\n        params = {}\n    end\n\n    self.name = 'RepeatUntilFailure'\n    self.title = 'Repeat Until Failure'\n    self.parameters = {maxLoop = -1}\n\n    self.maxLoop = params.maxLoop or -1\nend\n\nfunction repeatUntilFailure:open(tick)\n    tick.blackboard.set('i', 0, tick.tree.id, self.id)\n    self.maxLoop = self.properties.maxLoop\nend\n\nfunction repeatUntilFailure:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local i = tick.blackboard.get('i', tick.tree.id, self.id)\n    local status = B3.ERROR\n\n    while (self.maxLoop < 0 or i < self.maxLoop) do\n        local status = self.child:_execute(tick)\n\n        if status == B3.SUCCESS then\n            i = i + 1\n        else\n            break\n        end\n    end\n\n    i = tick.blackboard.set('i', i, tick.tree.id, self.id)\n    return status\nend\n\n---------------------Inverter\nlocal inverter = B3.Class('Inverter', B3.Decorator)\nB3.Inverter = inverter\n\nfunction inverter:ctor()\n    B3.Inverter.ctor(self)\n\n    self.name = 'Inverter'\nend\n\nfunction inverter:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local status = self.child:_execute(tick)\n\n    if status == B3.SUCCESS then\n        status = B3.FAILURE\n    elseif status == B3.FAILURE then\n        status = B3.SUCCESS\n    end\n\n    return status\nend\n\n-------------\nlocal maxTime = B3.Class('MaxTime', B3.Decorator)\nB3.MaxTime = maxTime\n\nfunction maxTime:ctor(params)\n    B3.MaxTime.ctor(self)\n\n    self.name = 'MaxTime'\n    self.title = 'Max <maxTime>ms'\n    self.parameters = {maxTime = 0}\n\n    if not params or not params.maxTime then\n        print('maxTime parameter in MaxTime decorator is an obligatory parameter')\n        return\n    end\n\n    self.maxTime = params.maxTime\nend\n\nfunction maxTime:open(tick)\n    local startTime = Timer.GetTimeMillisecond()\n    self.maxTime = self.properties.maxTime\n    tick.blackboard:set('startTime', startTime, tick.tree.id, self.id)\nend\n\nfunction maxTime:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local currTime = Timer.GetTimeMillisecond()\n    local startTime = tick.blackboard.get('startTime', tick.tree.id, self.id)\n\n    local status = self.child:_execute(tick)\n    if currTime - startTime > self.maxTime then\n        return B3.FAILURE\n    end\n\n    return status\nend\n\n-------------Limiter\nlocal limiter = B3.Class('Limiter', B3.Decorator)\nB3.Limiter = limiter\n\nfunction limiter:ctor()\n    B3.Decorator.ctor(self)\n\n    self.name = 'Limiter'\n    self.title = 'Limit <maxLoop> Activations'\n    self.parameters = {maxLoop = 1}\nend\n\nfunction limiter:open(tick)\n    tick.blackboard.set('i', 0, tick.tree.id, self.id)\n    self.maxLoop = self.properties.maxLoop\nend\n\nfunction limiter:tick(tick)\n    if not self.child then\n        return B3.ERROR\n    end\n\n    local i = tick.blackboard:get('i', tick.tree.id, self.id)\n\n    if i < self.maxLoop then\n        local status = self.child:_execute(tick)\n\n        if status == B3.SUCCESS or status == B3.FAILURE then\n            tick.blackboard:set('i', i + 1, tick.tree.id, self.id)\n        end\n\n        return status\n    end\n\n    return B3.FAILURE\nend\n"}}]},{"class":"cScriptObject","name":"CustomNodes","guid":[3506465198,892881498,2809204051,2983381729],"parentGuid":[2876989748,2457488097,2382853771,4121614769],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"CustomNodes"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"local testr = B3.Class('Test', B3.Action)\nB3.Test = testr\n\nfunction testr:ctor()\n    B3.Action.ctor(self)\n\n    self.name = 'Test'\nend\n\nfunction testr:tick(tick)\n    print(self.title)\n    --print(type(self.properties.mVal))\n    if (self.properties.mVal == 'true') then\n        return B3.SUCCESS\n    else\n        return B3.RUNNING\n    end\nend\n"}}]},{"class":"cPrimitiveObject","name":"BaseFloor","guid":[4211227124,399589691,2212667733,3335218667],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,0.8,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"BaseFloor"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBasicShapeComponent","data":{"m_size":[50.0,0.2,50.0]}},{"id":12,"class":"sRigidBodyComponent","data":{"m_density":2400.0,"m_frictionRate":0.4,"m_rough":0.4499,"m_restitution":0.4499,"m_statusFlag":10}},{"id":13,"class":"sMaterialComponent","data":{"m_uvScale":3.0,"m_materialType":"kSubwayTiles"}},{"id":30,"class":"sPrimitiveRenderComponent","data":{}},{"id":3,"class":"sSizeComponent","data":{}},{"id":666,"class":"sStateSyncComponent","data":{}}]},{"class":"cFolderObject","name":"SpawnLocations","guid":[1803916521,3674621259,2355104850,441818688],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"SpawnLocations"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cStartPortal","name":"StartPortal00","guid":[362184257,1300644271,2169624314,2670603163],"parentGuid":[1803916521,3674621259,2355104850,441818688],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[10.0,1.5,-10.0],"m_localRotation":[0.0,-0.3826,-0.0,0.9238]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"StartPortal00"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sStartPortalComponent","data":{}}]},{"class":"cStartPortal","name":"StartPortal01","guid":[651144420,800934336,3039799213,1377036607],"parentGuid":[1803916521,3674621259,2355104850,441818688],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[10.0,1.5,10.0],"m_localRotation":[0.0,0.9238,0.0,-0.3826]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"StartPortal01"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sStartPortalComponent","data":{}}]},{"class":"cStartPortal","name":"StartPortal02","guid":[4009425966,1206468687,2439525561,4287493119],"parentGuid":[1803916521,3674621259,2355104850,441818688],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-10.0,1.5,-10.0],"m_localRotation":[0.0,0.3826,0.0,0.9238]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"StartPortal02"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sStartPortalComponent","data":{}}]},{"class":"cStartPortal","name":"StartPortal03","guid":[3415283602,2930724749,3175953031,3420113780],"parentGuid":[1803916521,3674621259,2355104850,441818688],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-10.0,1.5,10.0],"m_localRotation":[0.0,0.9238,0.0,0.3826]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"StartPortal03"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sStartPortalComponent","data":{}}]},{"class":"cAudioSource","name":"BGM","guid":[1596674502,2319271992,2900844459,2801180766],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,0.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"BGM"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sAudioSourceComponent","data":{}}]},{"class":"cSkydome","name":"Sky","guid":[3956874685,1991789763,3220541584,1456680764],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,0.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Sky"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sSkydomeComponent","data":{"m_ambient":[0.5019,0.5019,0.5019,1.0],"m_latitude":45.0}},{"id":11,"class":"sDateTimeComponent","data":{}},{"id":12,"class":"sFogComponent","data":{}}]},{"class":"cFolderObject","name":"Players","guid":[3397398191,850542637,3138524115,1333674022],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Players"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[718760084,1257915969,2962466066,2150526306],"parentGuid":[3397398191,850542637,3138524115,1333674022],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerInstanceSlot"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sPlayerInstanceSlotComponent","data":{"m_archetype":[821939657,2231651804,3205518288,3133023722]}}]},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[438081159,4019275113,2394302102,997050187],"parentGuid":[3397398191,850542637,3138524115,1333674022],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerInstanceSlot"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sPlayerInstanceSlotComponent","data":{"m_archetype":[821939657,2231651804,3205518288,3133023722]}}]},{"class":"cPlayerInstanceSlot","name":"PlayerInstanceSlot","guid":[154289415,229392516,2254790969,287930189],"parentGuid":[3397398191,850542637,3138524115,1333674022],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerInstanceSlot"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sPlayerInstanceSlotComponent","data":{"m_archetype":[821939657,2231651804,3205518288,3133023722]}}]},{"class":"cTerrainObject","name":"Terrain","guid":[2381081137,2979483093,3156488065,1492146101],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Terrain"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":610,"class":"sTerrainComponent","data":{"m_memWaterStreamBuffer":[{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false}],"m_emptyPlaceholder":true,"m_terrainIndex":[0,1,2,3,4,5,6,7],"m_textures":[{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false},{"m_guid":[0,0,0,0],"m_revision":-1,"m_type":"kGeneric","m_autoGenerated":false}]}},{"id":13,"class":"sRenderComponent","data":{}},{"id":15,"class":"sRigidBodyComponent","data":{"m_frictionRate":0.4499,"m_rough":0.4,"m_restitution":0.3,"m_statusFlag":10}}]},{"class":"cStaticSpaceFolderObject","name":"StaticSpace","guid":[1156127896,989415793,2817242198,3730054242],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"StaticSpace"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}}]},{"class":"cPlayerInstance","name":"Npc","guid":[557654785,2380155339,3013303160,941967483],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,1.1147,-2.9]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Npc"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sRigidBodyComponent","data":{"m_isStatic":false,"m_density":1000.0,"m_frictionRate":0.0,"m_rough":0.0,"m_restitution":0.0,"m_freezeRotation":true,"m_statusFlag":10}},{"id":20,"class":"sCharacterControllerComponent","data":{"m_NPCController":true}},{"id":40,"class":"sCharacterStateComponent","data":{"m_avatar":[1231775529,3008252344,2697807223,2336561612],"m_displayName":true,"m_isNpc":true}},{"id":50,"class":"sRenderComponent","data":{}},{"id":60,"class":"sNetworkComponent","data":{}},{"id":666,"class":"sStateSyncComponent","data":{}}]},{"class":"cNpcAvatarInstance","name":"NpcAvatar","guid":[1231775529,3008252344,2697807223,2336561612],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sRegularTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NpcAvatar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sPlayerModelInstanceComponent","data":{"m_head":{"attriValue":"","valueList":["DefaultMale","Male_Head2","Male_Head3"]},"m_clothes":{"attriValue":"","valueList":["DefaultMale","Male_Chest_Naked_01","Male_Chest_TshirtShort_A001","Male_Chest_TshirtShort_A002","Male_Chest_TshirtShort_A003","Male_Chest_TshirtShort_A004","Male_Chest_TshirtShort_A005","Male_Chest_TshirtShort_A006","Male_Chest_TshirtShort_A007","Male_Chest_TshirtShort_A008","Male_Chest_TshirtShort_A009","Male_Chest_TshirtShort_A010","Male_Chest_TshirtShort_B001","Male_Chest_TshirtShort_B002","Male_Chest_TshirtShort_B003","Male_Chest_TshirtShort_B004","Male_Chest_TshirtShort_B005","Male_Chest_TshirtShort_B02001","Male_Chest_TshirtShort_B02002","Male_Chest_TshirtShort_B02003","Male_Chest_TshirtShort_B02004","Male_Chest_TshirtShort_B03001","Male_Chest_TshirtShort_B03002","Male_Chest_TshirtShort_03001","Male_Chest_TshirtShort_03002","Male_Chest_TshirtShort_03003","Male_Chest_TshirtShort_03004","Male_Chest_TshirtShort_03005","Male_Chest_SweaterLong_A001","Male_Chest_SweaterLong_A002","Male_Chest_SweaterLong_A003","Male_Chest_SweaterLong_A004","Male_Chest_SweaterLong_A005","Male_Chest_SweaterLong_A006","Male_Chest_SweaterLong_A007","Male_Chest_SweaterLong_A008","Male_Chest_SweaterLong_A009","Male_Chest_SweaterLong_A010","Male_Chest_SweaterLong_A011","Male_Chest_SweaterLong_A012","Male_Chest_SweaterLong_A013","Male_Chest_SweaterLong_A014","Male_Chest_SweaterLong_A015","Male_Chest_SweaterLong_A016","Male_Chest_SweaterLong_A017","Male_Chest_Jacket_Baseball_A001","Male_Chest_Jacket_Baseball_A002","Male_Chest_Jacket_Baseball_A003","Male_Chest_Jacket_Baseball_A004","Male_Chest_Jacket_Baseball_A005","Male_001Jacket","Male_Jacket_Leis01","RedJacket","Male_Jacket_Leis02","Male_Jacket_Leis03","Male_006Jacket","Male_007Jacket","Male_008Tshirt","Male_009Jacket","Male_010Tshirt","Male_011Tshirt","Male_012Jacket","Male_Chest_Robe_India_001","Male_Chest_JacketIndiaSilk_001","Male_AviatorJacket","Male_MexicJacket","Male_SpaceJacket","Male_BaseballJacket","Male_BaseballJacket_02","Male_UniverJacket","Male_UniverJacket_01","Male_OwlJacket","Male_OwlJacket_02","Male_Chest_ArmorGriffin_001","Male_Chest_ArmorGriffin_002","Unisex_Chest_ArmorIron_001","Unisex_Chest_ArmorIron_002","Male_WendigoJacket","Male_WendigoJacket_02","Male_NutJacket","Male_Chest_UniformPolice_001","Male_Chest_TshitSki_001","Male_Chest_JacketRobtDog_001","Male_Chest_MuscleSuitShark_001","Male_Chest_MuscleSuitShark_002","Male_Chest_TshirtWaste_001","Male_Chest_TshirtWaste_00","Male_Chest_JacketBiker_001","Male_Chest_JacketMotor_001","Male_Chest_TshirtSteam_001","Male_Chest_JacketRobtEva_001","Male_Chest_JacketRobtEva_002","Male_Chest_JacketRobtEva_003","Male_Chest_JacketRobtEva_004","Male_Chest_JacketAI_001","Male_Chest_JacketAI_002","Male_Chest_MadMaxVest_001","Male_Chest_MadMaxVest_002","Male_Chest_MadMaxVest_003","Male_Chest_TshirtCowboy_001","Male_Zombies01Tshirt","Male_Zombies03Jacket","Male_Zombies04Tshirt","Male_Zombies06Jacket","Male_Chest_JacketElf_001","Male_Chest_JacketCasual_001","Male_Chest_TshirtSArmy_001","Male_Chest_UniformSoccer_001","Male_Chest_JacketFire_001","Male_Chest_TshirtSStreetball_01_001","Male_Chest_TshirtSStreetball_02_002","Male_Chest_JacketEnergy_01_001","Male_Chest_SuitSuit_02_001","Male_Chest_SuitSuit_TV_001","Male_Chest_JacketLeisure_001","Male_Chest_ShirtLeisure_001","Male_Chest_TshirtSkater_001","Male_Chest_JacketWaste_002","Male_Chest_JacketWaste_02_002","Male_Chest_SweaterUnicorn_001","Male_Chest_JacketGreenBerets_001","Male_Chest_JacketSnow_01_001","Male_Chest_JacketSnow_01_002"]},"m_trousers":{"attriValue":"","valueList":["DefaultMale","Male_Jeans01Trousers","Male_Leis01Trousers","Male_003Trousers","Male_Leis01Pants","Male_Leis03Trousers","Male_006Trousers","Male_007Trousers","Male_008Trousers","Male_009Trousers","Male_010Trousers","Male_011Trousers","Male_012Pants","Male_Leg_Pants_India_001","Male_Leg_TrousersIndiaSilk_001","Male_AviatorTrousers","Male_AviatorTrousers_02","Male_MexicTrousers","Male_SpaceTrousers","Male_BaseballTrousers","Male_BaseballTrousers_02","Male_UniverTrousers","Male_UniverTrousers_01","Male_OwlTrousers","Male_OwlTrousers_02","Male_Leg_ArmorGriffin_001","Male_Leg_ArmorGriffin_002","Male_Leg_ArmorIron_001","Male_Leg_ArmorIron_002","Male_WendigoTrousers","Male_WendigoTrousers_02","Male_NutTrousers","Male_Leg_PantsLPolice_001","Male_Leg_PantsLPolice_002","Male_Leg_PantsLSki_001","Male_Leg_PantsLRobtDog_001","Male_Leg_TrousersWaste_001","Male_Leg_TrousersWaste_00","Male_Leg_TrousersBiker_001","Male_Leg_TrousersLMotor_001","Male_Leg_TrousersSteam_001","Male_Leg_PantsLRobtEva_001","Male_Leg_PantsLRobtEva_002","Male_Leg_PantsLAI_001","Male_Leg_TrousersMadMax_001","Male_Leg_TrousersMadMax_002","Male_Leg_TrousersCowboy_001","Male_Zombies01Pants","Male_Zombies03Trousers","Male_Zombies04Trousers","Male_Zombies06Trousers","Male_Leg_TrousersElf_001","Male_Leg_TrousersCasual_001","Male_Leg_PantsLArmy_001","Male_Leg_PantsSoccer_001","Male_Leg_FireTrousers","Male_Leg_Streetball_01PantsS","Male_Leg_Energy_01_MPantsS","Male_Leg_BeachShorts_A001","Male_Leg_BeachShorts_A002","Male_Leg_BeachShorts_A003","Male_Leg_BeachShorts_A004","Male_Leg_BeachShorts_A005","Male_Leg_BeachShorts_A006","Male_Leg_BeachShorts_A007","Male_Leg_BeachShorts_A008","Male_Leg_PantsShark_001","Male_Leg_PantsShark_002","Male_Leg_Suit_02_MTrousers","Male_Leg_Suit_TV_MTrousers","Male_Leg_PantsLLeisure_001","Male_Leg_PantsSkater_001","Male_Leg_PantsSWaste_002","Male_Leg_PantsLUnicorn_001","Male_Leg_TrousersGreenBerets_001","Male_Leg_PantsLSnow_01_001","Male_Leg_PantsLSnow_01_002"]},"m_hair":{"attriValue":"","valueList":["DefaultMale","Hair_Brown01M","Hair_Blonde01M","Hair_Blonde02M","Hair_Orange01M","Hair_White01M","Hair_Green01M","Male_Head_Hair_010","Male_Head_Hair_014","Male_Head_Hair_015","Male_Head_Hair_018","Male_Head_Hair_019","Male_Head_Hair_020","Male_Head_Hair_023","Male_Head_Hair_024","Male_Head_Hair_028","Male_Head_Hair_030","Male_Head_Hair_033","Hair_Zombies06_M"]},"m_hairColor":{"attriValue":"","valueList":["DefaultMale","Hair_Male_02","Hair_Male_03","Hair_Male_04","Hair_Male_05","Hair_Male_06","Hair_Male_07","Hair_Male_08","Hair_Male_09","Hair_Male_10","Hair_Male_11","Hair_Male_12","Hair_Male_13","Hair_Male_14","Hair_Male_15","Hair_Male_16","Hair_Male_17","Hair_Male_18","Hair_Male_19","Hair_Male_20","Hair_Male_21","Hair_Male_22","Hair_Male_23","Hair_Male_24"]},"m_hands":{"attriValue":"","valueList":["DefaultMale","Default_Hands","Male_GLeather01","Male_AviatorGloves","Male_SpaceGloves","Male_BaseballGloves","Male_UniverGloves","Male_UniverGloves_01","Male_OwlGloves","Unisex_Hand_GlovesGriffin_001","Unisex_Hand_GlovesIron_001","Male_WendigoGloves","Male_WendigoGloves_02","Unisex_Hand_GlovesSki_001","Unisex_Hand_GlovesRobtDog_001","Male_Hand_GlovesBiker_001","Unisex_Hand_GlovesRobtEva_001","Unisex_Hand_GlovesRobtEva_002","Unisex_Hand_GlovesAI_001","Male_Hand_GlovesSteam_001","Male_Hand_GlovesElf_001","Male_Hand_GlovesFire_001","Male_Hand_GlovesStreetball_001"]},"m_shoes":{"attriValue":"","valueList":["DefaultMale","Male_Feet_Naked_01","LeatherShoe","Male_Leis01Shoes","Unisex_Feet_CanvasShoes_A001","Unisex_Feet_CanvasShoes_A002","Unisex_Feet_CanvasShoes_A003","Unisex_Feet_CanvasShoes_A004","Unisex_Feet_CanvasShoes_A005","Unisex_Feet_CanvasShoes_A006","Unisex_Feet_CanvasShoes_A007","Unisex_Feet_CanvasShoes_A008","Unisex_Feet_CanvasShoes_A009","Unisex_Feet_CanvasShoes_A010","Unisex_Feet_Sneakers_01001","Unisex_Feet_Sneakers_01002","Unisex_Feet_Sneakers_01003","Unisex_Feet_Sneakers_01004","Unisex_Feet_Sneakers_01005","Unisex_Feet_Sneakers_01006","Unisex_Feet_Sneakers_01007","Unisex_Feet_Sneakers_01008","Unisex_Feet_Sneakers_01009","Unisex_Feet_Sneakers_01010","Unisex_Feet_Sneakers_01011","Unisex_Feet_Sneakers_01012","Unisex_Feet_Sneakers_01013","Unisex_Feet_Sneakers_01014","Unisex_Feet_Sneakers_01015","Unisex_Feet_Sneakers_01016","Male_003Shoes","Male_BLeather01","Male_Leis03Shoes","Male_006Shoes","Male_007Shoes","Male_008Shoes","Male_009Shoes","Unisex_Feet_BasketballShoes_003","Male_010Shoes","Male_011Boots","Male_012Boots","Male_Feet_Shoes_India_001","Male_Feet_ShoesIndiaSilk_001","Male_AviatorShoes","Male_MexicBoots","Male_SpaceBoots","Male_BaseballShoes","Male_UniverShoes","Male_UniverShoes_01","Male_OwlBoots","Unisex_Feet_ShoesGriffin_001","Unisex_Feet_ShoesIron_001","Male_WendigoShoes","Male_WendigoShoes_02","Male_NutBoots","Unisex_Feet_ShoesPolice_001","Unisex_Feet_BootsSki_001","Unisex_Feet_ShoesSki_001","Male_Feet_ShoesRobtDog_001","Unisex_Feet_SlippersShark_001","Male_Feet_BootsWaste_001","Male_Feet_BootsBiker_001","Male_Feet_BootsMotor_001","Male_Feet_BootsSteam_001","Unisex_Feet_ShoesRobtEva_001","Unisex_Feet_ShoesRobtEva_002","Unisex_Feet_ShoesAI_001","Male_Feet_BootsMadMax_001","Male_Feet_BootsCowboy_001","Male_Zombies01Shoes","Male_Zombies03Boots","Male_Zombies04Boots","Male_Zombies06Shoes","Male_Feet_BootsElf_001","Male_Feet_ShoesCasual_001","Unisex_Feet_ShoesDiving_001","Unisex_Feet_FinsDiving_001","Unisex_Feet_FinsDiving_002","Unisex_Feet_FinsDiving_003","Unisex_Feet_FinsDiving_004","Unisex_Feet_FinsDiving_005","Unisex_Feet_FinsDiving_006","Unisex_Feet_FinsDiving_007","Unisex_Feet_BootArmy_001","Male_Soccer_001_Shoes","Unisex_Feet_ShoesFire_001","Male_Streetball_01_Shoes","Male_Feet_BootsEnergy_01_M_001","Male_Feet_BootsSuit_02_M_001","Male_Feet_BootsSuit_TV_M_001","Female_Soccer_001_Shoes","Female_waste_04_Shoes","Female_Feet_ShoesLeisure_001","Male_Feet_ShoesLeisure_001","Male_Feet_ShoesSkater_001","Female_Feet_BootsWaste_002","Male_Feet_BootsUnicorn_001","Male_Feet_BootsGreenBerets_001","Male_Feet_BootsSnow_01_001"]},"m_skinColor":{"attriValue":"","valueList":["DefaultMale","Color2","Color3","Color4","Color5","Color6","Color7","Color8","Color9","Color10","Color11","Color12","Color13"]},"m_headAccessory":{"attriValue":"","valueList":["Empty_Head","Male_ComHat_001","Male_ComHat003","Male_ComHat004","Male_ComHat005","Male_ComHat006","Male_ComHat007","Male_ComHat00702","Male_ComHat00703","Unisex_Head_Hat_016","Male_008Hat","Male_010Hat","Male_011Hat","Male_012Hat","Male_Head_Hat_Leisure_001","Male_Head_Hat_Skater_001","Male_Head_ComHelmet_002","Male_ComHelmet003","Male_ComHelmet004","Male_ComHelmet005","Male_013Hat","Female_013Hat","Male_Head_HatCowboy_001","Male_Head_HatCasual_001","Male_AviatorHat","Male_MexicHat","Male_SpaceHelmet","Male_Baseball01Hat","Male_Baseball02Hat","Male_Baseball03Hat","Male_Baseball04Hat","Male_UniverHelmet","Male_UniverHelmet_01","Male_Owl_Helmet","Male_Head_HelmetGriffin_001","Unisex_Head_HelmetIron_001","Male_Wendigo_Helmet","Male_Wendigo_Helmet_02","Male_Nut_Helmet","Male_Head_Hat_Unicorn","Unisex_Head_MaskPolice_001","Unisex_Head_CapPolice_001","Unisex_Head_CapSki_001","Male_Head_HelmetRobtDog_001","Male_Head_HelmetShark_001","Male_Head_HelmetBiker_001","Female_Head_HelmetBiker_001","Female_Head_HelmetMotor_001","Male_Head_HelmetMotor_001","Male_Head_HatSteam_001","Unisex_Head_HelmetRobtEva_001","Unisex_Head_HelmetRobtEva_002","Unisex_Head_HelmetAI_001","Male_Head_HelmetSuit_TV_001","Female_Head_HelmetSuit_TV_001","Male_Head_Hat_India_001","Male_Head_HelmetIndiaSilk_001","Male_Head_HelmetIndiaSilk_002","Unisex_Head_HelmetArmy_001","Unisex_Head_HelmetFire_001","Male_Zombies01Hat","Male_Zombies03_Helmet","Male_Zombies04_Helmet","Male_Zombies06_Hat","Male_Head_HatElf_001","Unisex_Head_HelmetDiving_001","Unisex_Head_HelmetMadMax","Unisex_Head_HelmetGreenBerets","Unisex_Head_HelmetSnow_01_001","Unisex_Head_HatSnow_01_001","Unisex_Head_Headset_001","Unisex_Head_Headset_002","Unisex_Head_Headset_003","Unisex_Head_Headset_004","Unisex_Head_Headset_005","Unisex_Head_Hat_012","Unisex_Head_Hat_013","Unisex_Head_Hat_01401","Unisex_Head_Hat_01402","Unisex_Head_Hat_015"]},"m_faceAccessory":{"attriValue":"","valueList":["Empty_Face","Glasses","Unisex_Head_GlassLeisure_001","Unisex_Head_GlassSkater_001","Unisex_Head_GlassEnergy_001","Female_MadMax_Glasses","Unisex_Head_Glass_00101","Unisex_Head_Glass_00102","Unisex_Head_Glass_00201","Unisex_Head_Glass_00202","Unisex_Head_Glass_00203","Unisex_Head_Glass_003","Unisex_Head_Glass_004","Unisex_Head_Glass_005","Unisex_Head_Glass_006","Unisex_Head_Glass_007","Unisex_Head_Glass_008","Unisex_Head_Glass_010","Unisex_Head_Glass_011","Unisex_Head_Glass_012","Unisex_Head_Glass_013","Unisex_Head_Goggle_001","Unisex_Head_Goggle_002","Unisex_Head_Goggle_003","Unisex_Head_Goggle_004","Unisex_Head_Goggle_005","Unisex_Head_Goggle_006","Unisex_Head_Goggle_007","Unisex_Head_Decoration_00501","Unisex_Head_Decoration_00601","HeadSet","Unisex_Head_MaskMadMax","Unisex_Head_MaskFire_001","Unisex_Head_Mask_001","Unisex_Head_Mask_002","Unisex_Head_Mask_003","Unisex_Head_Mask_004","Unisex_Head_Mask_005","Unisex_Head_Mask_00701","Unisex_Head_Mask_00702","Unisex_Head_Mask_00703","Unisex_Head_Mask_008","Unisex_Head_Mask_00901","Unisex_Head_Mask_00902","Unisex_Head_MaskGreenBerets_001","Unisex_Head_Decoration_00101","Unisex_Head_Decoration_002","Unisex_Head_Decoration_003","Unisex_Head_Decoration_004","Unisex_Head_Earpods_Leisure_001"]},"m_bodyAccessory":{"attriValue":"","valueList":["Empty_Body","Male_AviatorScarf","Male_AviatorScarf_02","Male_AviatorScarf_03","Male_Zombies06_ChestSup","Unisex_Chest_LifeVest_01","Male_009Bag","Male_012Bag","Female_Chest_Hobo_002","Unisex_Body_BagLeisure_001","Male_AviatorBag","Male_MexicUkulele","Male_SpaceBag","Male_BaseballBag","Male_UniverBag","Male_WendigoBag","Unisex_Back_BackpackPolice_001","Unisex_Back_BackpackSki_001","Female_Back_BackpackSteam_001","Unisex_Chest_BackpackEnergy_001","Male_Zombies04Bag","Female_Zombies05Bag","Male_Zombies06Bag","Unisex_Chest_Backpack_00801","Unisex_Chest_Backpack_00901","Unisex_Chest_Backpack_01001","Unisex_Chest_Backpack_01101","Unisex_Chest_Backpack_01201","Unisex_Chest_ShoulderBag_00201","Unisex_Chest_ShoulderBag_00301","Unisex_Chest_ShoulderBag_00401","Unisex_Chest_ShoulderBag_00601","Male_Back_WingsElf_001","Male_Back_WingsUnicorn_001","Unisex_Back_BackpackCasual_001","Unisex_Chest_BagFire_001","Unisex_Chest_BackpackDiving_001","Female_Chest_OxygenDiving_001","Female_Chest_OxygenDiving_002","Male_BchestSup","Male_ComChestSup001","Male_ComChestSup002","Male_ComChestSup003","Unisex_Chest_FlakVestArmy_001","Unisex_Chest_FlakVest_ColaVending","Unisex_Chest_FlakVest_Chalkboard","Unisex_Chest_FlakVest_Light_00101","Unisex_Chest_FlakVest_Light_00102","Unisex_Chest_FlakVest_Pizzabox","Unisex_Chest_FlakVest_Recorder","Unisex_Chest_FlakVestStreetball_001","Unisex_Chest_FlakVestMadMax_001","Unisex_Chest_FlakVestMotor_001","Unisex_Chest_FlakVestGreenBerets_001","Unisex_Chest_FlakVestGreenBerets_002","Unisex_Chest_FlakVestSnow_01_001","LifeBuoy","Unisex_Pelvis_Lifebuoy_Duck_01","Unisex_Pelvis_Lifebuoy_Donut_01","Unisex_Pelvis_Lifebuoy_Donut_02","Unisex_Pelvis_Lifebuoy_Watermelon","Unisex_Pelvis_Lifebuoy_Tire","NutSabre","Male_Pelvis_Cowboy_GunBag","Unisex_BagWaste_002","Watch","Female_CasualWatch","Unisex_Hand_WatchDiving_001","Male_010Wrist","Female_CasualWrist","Male_IndiaSilkWrist","Male_SteamWrist","Male_011Wrist","Unisex_Arm_WristWaste_002","Unisex_Hand_WatchLeisure_01","Unisex_Hand_WatchSkater_01","Unisex_Hand_WristbandSkater_01","Unisex_Hand_WristbandSkater_002","Unisex_Hand_WristbandMadMax_01","Unisex_Hand_WristbandStreetball_01"]},"m_eyes":{"attriValue":"","valueList":["Default_Eyes_M","Idle02_Eyes_M","Idle03_Eyes_M","Idle04_Eyes_M","Idle05_Eyes_M","Idle06_Eyes_M","Idle07_Eyes_M","Idle08_Eyes_M","Idle09_Eyes_M","Idle10_Eyes_M","Idle11_Eyes_M","Idle12_Eyes_M"]},"m_eyesColor":{"attriValue":"","valueList":["DefaultMale","Eyes_C_02","Eyes_C_03","Eyes_C_04","Eyes_C_05","Eyes_C_06","Eyes_C_07","Eyes_C_08","Eyes_C_09"]},"m_brows":{"attriValue":"","valueList":["Default_Eyebrow_M","Idle02_Eyebrow_M","Idle03_Eyebrow_M","Idle04_Eyebrow_M","Idle05_Eyebrow_M","Idle06_Eyebrow_M","Idle07_Eyebrow_M","Idle08_Eyebrow_M","Idle09_Eyebrow_M","Idle10_Eyebrow_M","Idle11_Eyebrow_M","Idle12_Eyebrow_M"]},"m_nose":{"attriValue":"","valueList":["Default_Nose_M"]},"m_mouth":{"attriValue":"","valueList":["Default_Mouth_M","Idle02_Mouth_M","Idle03_Mouth_M","Idle04_Mouth_M","Idle05_Mouth_M","Idle06_Mouth_M","Idle07_Mouth_M","Idle08_Mouth_M","Idle09_Mouth_M","Idle10_Mouth_M","Idle11_Mouth_M","Idle12_Mouth_M"]},"m_beard":{"attriValue":"","valueList":["Default_Beard_M","Beard_01_M","Beard_02_M"]},"m_faceDecoration":{"attriValue":"","valueList":["Default_FaceDecorate_M","Decoration_01_M","Decoration_02_M","Decoration_03_M","Decoration_04_M"]}}},{"id":20,"class":"sAnimationComponent","data":{}},{"id":25,"class":"sPlayerExpressionComponent","data":{}},{"id":45,"class":"sAnimationIKFullBodyComponent","data":{"m_rightFootTarget":[2367310542,290605948,2615944327,1917812362]}},{"id":40,"class":"sPlayerModelInstanceRenderComponent","data":{}}]},{"class":"cUiSurfaceUiObject","name":"NameGUI","guid":[1482332550,3394717746,2868581290,2295237364],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,2.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NameGUI","m_active":false}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUISurfaceRenderComponent","data":{}},{"id":26,"class":"sUiSurfaceUiComponent","data":{"m_billboard":true,"m_size":[300.0,80.0],"m_disappearDistance":15}}]},{"class":"cUiTextObject","name":"NameBar","guid":[1764275455,3033613466,2672385125,3091238670],"parentGuid":[1482332550,3394717746,2868581290,2295237364],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NameBar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":23,"class":"sUiTextComponent","data":{"m_widgetSize":[300.0,80.0],"m_text":"NPC","m_textColor":[255.0,255.0,255.0,255.0],"m_fontSize":32,"m_fontType":"kFZY4JY"}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiSurfaceUiObject","name":"HealthGUI","guid":[495557931,550323791,2284508679,1151179311],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[0.0,2.0,0.0]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"HealthGUI","m_active":false}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUISurfaceRenderComponent","data":{}},{"id":26,"class":"sUiSurfaceUiComponent","data":{"m_billboard":true,"m_size":[160.0,80.0]}}]},{"class":"cUiImageObject","name":"Background","guid":[1571337247,4276506147,2618749879,1933113932],"parentGuid":[495557931,550323791,2284508679,1151179311],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Background"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":22,"class":"sUiImageComponent","data":{"m_addedSize":[160.0,31.0],"m_pivot":[0.0,0.0],"m_anchorsX":[0.0,0.0],"m_anchorsY":[0.0,0.0],"m_finalSize":[160.0,31.0],"m_offset":[0.0,6.0],"m_textureRef":{"m_guid":[2748549193,222842754,2941154731,726271496],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false}}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cUiImageObject","name":"HealthBar","guid":[2095581018,4193992826,3180616627,2874037211],"parentGuid":[1571337247,4276506147,2618749879,1933113932],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"HealthBar"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":20,"class":"sUIRenderComponent","data":{}},{"id":22,"class":"sUiImageComponent","data":{"m_pivot":[0.0,0.0],"m_anchorsX":[0.05,0.9499],"m_anchorsY":[0.3,0.6999],"m_finalSize":[144.0,12.3999],"m_textureRef":{"m_guid":[364921788,1323712570,2497125887,1146669227],"m_revision":0,"m_type":"kTexture","m_autoGenerated":false}}},{"id":27,"class":"sUiTouchEventComponent","data":{}}]},{"class":"cScriptObject","name":"PlayerGUIScript","guid":[1672903388,596460199,2820999280,642118727],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"PlayerGUIScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"local player = script.Parent\n\nlocal nameGUI = player.NameGUI\nnameGUI.NameBar.Text = player.Name\nnameGUI.LocalPosition = Vector3(0, player.NpcAvatar.Height + 1.1, 0)\n\nlocal healthGUI = player.HealthGUI\nlocal background = healthGUI.Background\nlocal healthBar = background.HealthBar\nlocal RED_BAR = ResourceManager.GetTexture('Internal/Blood_Red')\nlocal GREEN_BAR = ResourceManager.GetTexture('Internal/Blood_Green')\nlocal ORANGE_BAR = ResourceManager.GetTexture('Internal/Blood_Orange')\n\nfunction NameBarLogic()\n    nameGUI:SetActive(player.DisplayName)\nend\nplayer.OnDisplayNameChanged:Connect(NameBarLogic)\n\nfunction healthChange(oldHealth, newHealth)\n    local percent = player.Health / player.MaxHealth\n    if player.HealthDisplayMode == Enum.HealthDisplayMode.OnHit then\n        healthGUI:SetActive(percent < 1)\n    end\n    if percent >= 0.7 then\n        healthBar.Texture = GREEN_BAR\n    elseif percent >= 0.3 then\n        healthBar.Texture = ORANGE_BAR\n    else\n        healthBar.Texture = RED_BAR\n    end\n    healthBar.AnchorsX = Vector2(0.05, 0.9 * percent + 0.05)\nend\nplayer.OnHealthChange:Connect(healthChange)\nplayer.OnMaxHealthChanged:Connect(healthChange)\n\nfunction HealthBarLogic()\n    if player.HealthDisplayMode == Enum.HealthDisplayMode.Always then\n        healthGUI:SetActive(true)\n    elseif player.HealthDisplayMode == Enum.HealthDisplayMode.Never then\n        healthGUI:SetActive(false)\n    elseif player.HealthDisplayMode == Enum.HealthDisplayMode.OnHit then\n        healthGUI:SetActive(player.Health ~= player.MaxHealth)\n    end\nend\nplayer.OnHealthDisplayModeChanged:Connect(HealthBarLogic)\n\nNameBarLogic()\nHealthBarLogic()\n"}}]},{"class":"cScriptObject","name":"AiFuncScript","guid":[1878721532,2979809209,2610914422,3804980083],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"AiFuncScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"local NPCmgr = require(script.Parent.NpcMgrModule)\n\nlocal statusCheck = B3.Class('StatusCheck', B3.Condition)\nB3.StatusCheck = statusCheck\n\nfunction statusCheck:ctor()\n    B3.Condition.ctor(self)\n    self.name = 'StatusCheck'\nend\n\nfunction statusCheck:tick(tick)\n    print(self.title)\n    if (self.title == 'CanSeePlayer') then\n        return NPCmgr:CanSeePlayer(B3)\n    end\n    return B3.SUCCESS\nend\n\nlocal heroAction = B3.Class('HeroAction', B3.Action)\nB3.HeroAction = heroAction\n\nfunction heroAction:ctor()\n    B3.Action.ctor(self)\n    self.name = 'HeroAction'\nend\n\nfunction heroAction:tick(tick)\n    print(self.title)\n    return B3.SUCCESS\nend\n"}}]},{"class":"cScriptObject","name":"MainScript","guid":[1516425449,617956124,2567249954,579591995],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"MainScript"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"local behaviorJson =\n    [[\n{\n  \"version\": \"0.3.0\",\n  \"scope\": \"tree\",\n  \"id\": \"298c3e26-e389-4354-aee6-0bc6db6fa551\",\n  \"title\": \"AISoldier\",\n  \"description\": \"\",\n  \"root\": \"e4ba5b3b-33bd-4355-8026-376a20ff121c\",\n  \"properties\": {},\n  \"nodes\": {\n    \"e4ba5b3b-33bd-4355-8026-376a20ff121c\": {\n      \"id\": \"e4ba5b3b-33bd-4355-8026-376a20ff121c\",\n      \"name\": \"Sequence\",\n      \"category\": \"composite\",\n      \"title\": \"Sequence\",\n      \"description\": \"\",\n      \"properties\": {},\n      \"display\": {\n        \"x\": 132,\n        \"y\": 0\n      },\n      \"children\": [\n        \"3edb35b2-c66a-4da8-b72a-70c2ab8ade68\",\n        \"22fbbc05-f5f9-4d06-848d-d77ff98d3bdc\"\n      ]\n    },\n    \"22fbbc05-f5f9-4d06-848d-d77ff98d3bdc\": {\n      \"id\": \"22fbbc05-f5f9-4d06-848d-d77ff98d3bdc\",\n      \"name\": \"HeroAction\",\n      \"category\": \"action\",\n      \"title\": \"Shot\",\n      \"description\": \"角色动作汇总，根据Title执行不同动作\",\n      \"properties\": {},\n      \"display\": {\n        \"x\": 336,\n        \"y\": 48\n      }\n    },\n    \"3edb35b2-c66a-4da8-b72a-70c2ab8ade68\": {\n      \"id\": \"3edb35b2-c66a-4da8-b72a-70c2ab8ade68\",\n      \"name\": \"StatusCheck\",\n      \"category\": \"condition\",\n      \"title\": \"CanSeePlayer\",\n      \"description\": \"角色状态检测，根据不同的Title执行不同检测\",\n      \"properties\": {},\n      \"display\": {\n        \"x\": 336,\n        \"y\": -36\n      }\n    }\n  },\n  \"display\": {\n    \"camera_x\": 492,\n    \"camera_y\": 380.5,\n    \"camera_z\": 1,\n    \"x\": 0,\n    \"y\": 0\n  },\n  \"custom_nodes\": [\n    {\n      \"version\": \"0.3.0\",\n      \"scope\": \"node\",\n      \"name\": \"HeroAction\",\n      \"category\": \"action\",\n      \"title\": \"角色动作\",\n      \"description\": \"角色动作汇总，根据Title执行不同动作\",\n      \"properties\": {}\n    },\n    {\n      \"version\": \"0.3.0\",\n      \"scope\": \"node\",\n      \"name\": \"StatusCheck\",\n      \"category\": \"condition\",\n      \"title\": \"角色状态\",\n      \"description\": \"角色状态检测，根据不同的Title执行不同检测\",\n      \"properties\": {}\n    }\n  ]\n}\n]]\nwait(1)\nprint('------------------------------------------------')\nlocal behaviorTree = B3.BehaviorTree.new()\nlocal blackBoard = B3.Blackboard.new()\nbehaviorTree:load(behaviorJson, {})\nprint('------------------------------------------------')\n\nwhile (true) do\n    wait(1)\n    behaviorTree:tick(nil, blackBoard)\nend\n\n--local i = 1\nlocal NPC = script.Parent\nwhile true do\n    wait(0.1)\n    local v3 = localPlayer.Position - script.Parent.Position\n    --NPC:FaceToDir(v3.Normalized,math.pi*10)\n    --i = i+1\n    print(Vector3.Angle(NPC.Forward, v3))\n    --print(type(localPlayer.Right))\nend\n"}}]},{"class":"cModuleScriptObject","name":"NpcMgrModule","guid":[2200592614,732054892,2510412088,3573524482],"parentGuid":[557654785,2380155339,3013303160,941967483],"components":[{"id":0,"class":"sIdentityTransform","data":{}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"NpcMgrModule"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sLuaComponent","data":{"m_luaContent":"local NPCmgrModule = {}\n\nlocal NPC = script.Parent\n\nfunction NPCmgrModule:CanSeePlayer(B3)\n    if Vector3.Angle(NPC.Forward, localPlayer.Position - NPC.Position) < 45 then\n        return B3.SUCCESS\n    else\n        return B3.FAILURE\n    end\nend\n\nreturn NPCmgrModule\n","m_scriptType":"kModuleScript"}}]},{"class":"cPrimitiveObject","name":"Sphere","guid":[2367310542,290605948,2615944327,1917812362],"parentGuid":[1981988479,3555894,2597800867,69741929],"components":[{"id":0,"class":"sRegularTransform","data":{"m_localPosition":[-8.7645,1.4004,-10.3711]}},{"id":665,"class":"sPhysicsDataCache","data":{}},{"id":2,"class":"sObjectDataComponent","data":{"m_name":"Sphere"}},{"id":19,"class":"sNetworkComponent","data":{}},{"id":40000,"class":"sScriptHelperComponent","data":{}},{"id":10,"class":"sBasicShapeComponent","data":{"m_shape":"kShapeSphere"}},{"id":12,"class":"sRigidBodyComponent","data":{"m_density":900.0,"m_frictionRate":0.4,"m_rough":0.3499,"m_restitution":0.6999,"m_statusFlag":10}},{"id":13,"class":"sMaterialComponent","data":{}},{"id":30,"class":"sPrimitiveRenderComponent","data":{}},{"id":3,"class":"sSizeComponent","data":{}},{"id":666,"class":"sStateSyncComponent","data":{}}]}]}]}